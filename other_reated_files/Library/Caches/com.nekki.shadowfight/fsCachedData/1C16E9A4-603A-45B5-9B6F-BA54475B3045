function initSDKLessRejection(){$(".sdkless").click(function(e){function t(e){if(e){var t=$(n).attr("href");$(n).attr("href",t+(t.indexOf("?")>-1?"&":"?")+"sdkless_install=true")}n.click()}var n=$(this).find("a");return $(this).unbind("click"),sdklessRejector.checkAppInstalled({"package":$(this).attr("data-bundle-id"),protocol:$(this).attr("data-bundle-protocol")},t),e.preventDefault(),!1}),sdklessRejector=new Tapjoy.SDKLessRejector}function loadSDKLessAssets(){var e=!1;$.each(sdkLessAssets,function(t){$.ajax({url:sdkLessAssets[t],dataType:"script",success:function(){t!=window.sdkLessAssets.length-1||e||initSDKLessRejection()},error:function(){e=!0}})})}var JSON;JSON||(JSON={}),function(){function str(e,t){var n,i,r,s,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;s>n;n+=1)a[n]=str(n,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,r}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return 10>e?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){var t=["zero","one","two","three","four","five","six","seven","eight","nine"],n=e.i18n||{};window.ENVIRONMENT,n.customError=function(e,t,n){var i,r,s="",a=window.JSON&&window.JSON.stringify||function(e){return e};t=t||{},n=n||"TapjoyCustomError",r=function(e,t){this.name=e,this.message=t},r.prototype=Error.prototype;for(i in t)t.hasOwnProperty(i)&&(s+="\n[ "+i+": "+a(t[i])+" ]");return e=s?e+s:e,new r(n,e)},n.basicTemplate=function(e,t){return t=t||{},e.replace(/%{(.+?)}/g,function(i,r){if(void 0===t[r])throw n.customError("No matching arg for template: ",{key:r,template:e,props:t});return t[r]})},n.pluralize=function(e,n){var i;return e&&"string"!=typeof e?(n=null!==n?n:1,i=e[t[n]]||e.other):e},n.query=function(e,t,i){var r,s,a=e.split(".");return r=function(e,t){return t?1===e.length?t[e[0]]:r(e.slice(1),t[e[0]]):null},s=r(a,n[t]),s=s||r(a,n[i])},n.t=function(t,i,r){var s;if(r=r||{},r.locale=r.locale||n.locale,r.count=r.count||null,s=n.query(t,r.locale,n.default_locale),s=n.pluralize(s,r.count),"string"!=typeof s)if(r.placeholder)s=r.placeholder;else{if("development"===e.ENVIRONMENT)throw n.customError("Did not find translation string: ",{key:t,locale:r.locale,default_locale:n.default_locale,result:s},"Tapjoyi18nError");s=""}return n.basicTemplate(s,i)},e.i18n=n}(this),function(e,t){var n=e,i=n.document,r=i.defaultView,s=i.documentElement,a=n.navigator,o=(n.location,a.language),l=a.appVersion,c=a.platform,u=a.userAgent,f=a.vendor,d=n.history,h=n.localStorage,p=Array.prototype,g=Object.prototype,m=String.prototype,A=g.toString,v=p.concat,y=p.filter,b=p.slice,w=p.splice,x=p.forEach,C=p.indexOf,E=m.trim,S=r.getComputedStyle,k={},O={},j={},B=0,T={};T.tbody=T.thead=T.tfoot=T.tr="table",T.th=T.td="tr";var I=function(){var n=function(e,t){return new n.fn.init(e,t)};n.fn=n.prototype={constructor:n,version:"1.0",init:function(r,s){if(r){if("[object Function]"===A.call(r))return n(i).ready(r);if(r instanceof n)return r;if(this.length=0,this.selector=r,this.context=s||i,"body"===r&&i.body)return this[this.length++]=i.body,this;if(n.pattern.nodes.test(r.nodeType)||r===e)return this[this.length++]=r,this;if(n.pattern.fragments.test(r)&&(r=n.fragment(r)),"[object Array]"===A.call(r)&&r.length!==t){for(var a=0,o=r.length;o>a;a++)this[this.length++]=r[a];return this}return this.context===i?n.merge(this,n.query(r,this.context)):n(this.context).find(r)}return this}},n.fragment=function(e){var t=(n.pattern.fragments.test(e),i.createElement(T[RegExp.$1]||"div"));return(t.innerHTML=""+e)&&b.call(t.childNodes)||[]&&(t.innerHTML="")&&(t=null)},n.query=function(e,t){var r=[],s=-1===e.indexOf(" ");if(t===i&&"#"===e[0]&&s){var a=t.getElementById(e.slice(1));a&&(r=[a])}else(1===t.nodeType||9===t.nodeType)&&(r="."===e[0]&&s?t.getElementsByClassName(e.slice(1)):n.pattern.tags.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e));return b.call(r)},n.apply=function(e,t,i){if(i&&n.apply(e,i),e&&t&&"[object Object]"===A.call(t))for(var r in t)e[r]=t[r];return e},n.apply(n,{camelCase:function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},data:function(e,t,i){return!e&&(e=this)||(e=n(e)),t||i?e.attr("data-"+t,i):e.attr("data")},each:function(e,t){if("[object Function]"===A.call(e)&&(t=e,e=this),"[object Number]"===A.call(e.length))e.forEach(function(e,n){t.call(e,n,e)});else if("[object Object]"===A.call(e))for(var n in e)t.call(e[n],n,e[n]);return this},extend:function(e){var i=1,r=!1;return n.isBoolean(e)&&(r=e,e=arguments[1]||{},i++),e===t&&(e=this,i--),n.each(b.call(arguments,i),function(i,s){var a,o,l,c;for(var u in s)a=e[u],o=s[u],e!==o&&(r&&o&&(n.isObject(o)||(l=n.isArray(o)))?(c=l?a&&n.isArray(a)?a:[]:a&&n.isObject(a)?a:{},e[u]=n.extend(r,c,o)):o!==t&&(e[u]=o))}),e},flatten:function(e){return e.length>0?v.apply([],e):e},format:function(e,i){if(!i||!n.isObject(i)&&!n.isArray(i))return t;var r=n.isObject(i)?"keys":"indexed";return e.replace(n.pattern.templates[r],function(e,t){return i[t]||""})},map:function(e,t){var i,r=e.length,s=[];if(n.isNumber(r))for(var a=0,o=r;o>a;a++)i=t(e[a],a),null!=i&&s.push(i);else for(var l in e)i=t(e[l],l),null!=i&&s.push(i);return n.flatten(s)},match:function(e,t){if(!e||1!==e.nodeType)return!1;if(t||(t="*"),!t.match)return t;var r=function(e,t){var i=e[n.browser.nativeSelector];return e&&i&&i.call(e,t)},s=t.match(this.pattern.expressions);return n.filters&&s?s[2]in n.filters?n.expressions(s,function(t,n,s){return!(t&&!r(e,t||i)||n&&n.call(e,null,s)!==e)}):void 0:r(e,t)},merge:function(e,i){var r=i.length,s=e.length,a=0;if(n.isNumber(r))for(;r>a;a++)e[s++]=i[a];else for(;i[a]!==t;)e[s++]=i[a++];return e.length=s,e},parseJSON:function(e){return JSON.parse(e)},parseXML:function(e){return(new DOMParser).parseFromString(e,"text/xml")},proxy:function(e,t){var i=b.call(arguments,2);return function(){return n.isFunction(e)&&e.apply(t,b.call(arguments).concat(i))}},stringify:function(e){return JSON.stringify(e)},toArray:function(e,t,i){var r=[];if(!e||!e.length)return r;n.isString(e)&&(e=e.split("")),i=i&&0>i&&e.length+i||i||e.length;for(var s=t||0;i>s;s++)r.push(e[s]);return r},trim:function(e){return e?E&&E.call(e)||String(e).replace(n.pattern.trim,""):t},type:function(e){return e===t?null:A.call(e).replace("[object ","").replace("]","").toLowerCase()},unique:function(e){for(var t=0,n=e.length;n>t;t++)e.indexOf(e[t])===t||e.splice(t,1);return e}}),n.each(["Array","Boolean","Date","Function","NodeList","Number","Object","RegExp","Simple","String","Window"],function(e,t){n["is"+t]=function(e){var i=n.type(e);return"Window"===t?null!=e&&e==e.window:"Simple"===t?!e||"object"!==i||e.nodeType||n.isWindow(e):"Number"===t&&"number"===i?!isNaN(parseFloat(e))&&isFinite(e):i===t.toLowerCase()||"htmlcollection"===i}}),n.each(["contains","has","inArray"],function(e,t){n[t]=function(e,t,n){return p.indexOf.call(t,e,n)}});var r={columns:1,columnsCount:1,fontWeight:1,lineHeight:1,opacity:1,zIndex:1,zoom:1},g=function(e){return e in O?O[e]:O[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")},m=function(e){for(var t=j[e.uid||(e.uid=B++)]={},i=0,r=e.attributes.length;r>i;i++){var s=e.attributes[i],a=s.name,o=I(s.value);~a.indexOf("data")&&(t[a.substr(5)]=n.pattern.numbers.test(o)&&parseInt(o,10)||o)}return t},I=function(e){var t=e.length;return"string"==typeof e&&"{"===e[0]&&t>1&&"}"===e[t-1]?JSON.parse(e):e};n.fn.init.prototype=n.fn,n.apply(n.fn,{concat:v,forEach:x,indexOf:C,splice:w,each:n.each,extend:n.extend,attr:function(e,i){if(this[0]!==t){if("string"==typeof e&&i===t){var r=this[0],i=r.getAttribute(e);return i?I(i):~e.indexOf("data-")?j[r.uid]&&j[r.uid][e.substr(5)]:"data"===e?(j[r.uid]||m(r),j[r.uid]):t}for(var s=0,a=this.length;a>s;s++){var r=this[s];if(1!==r.nodeType)return;if(n.isObject(e))for(var o in e)r.setAttribute(o,e[o]);else if(i!==t){if(~e.indexOf("data-")){var l=j[r.uid];!l&&(l=m(r)),l[e.substr(5)]=i}n.isObject(i)||r.setAttribute(e,i)}}return this}},chain:function(e){return e&&(e.prevObject=this),!!e&&n(e)||n()},children:function(e){var i=[];if(this[0]===t)return t;for(var r=0,s=this.length;s>r;r++)i=i.concat(n.siblings(this[r].firstChild));return this.chain(n(i).filter(e))},clone:function(e){var t=this.map(function(){return this.cloneNode(e||!0)});return n(t)},closest:function(e,r){if(0===this.length)return t;var s=this[0],a=n(e,r);if(0===a.length)return n();for(;s&&a.indexOf(s)<0;)s=s!==r&&s!==i&&s.parentNode;return this.chain(n(s))},css:function(e,i){var s="string"==typeof e,a=this[0];if(!(0===this.length||a&&1!==a.nodeType)){if(s&&i===t){var o=n.camelCase(e),i=a.style[o]||S(a,null)[o];return n.pattern.cssNumbers.test(o)&&(i=parseFloat(i)),i}for(var l=0,c=this.length;c>l;l++){var u="number"==typeof i;if(s){var o=n.camelCase(e);this[l].style[o]=u&&!r[o]&&parseInt(i,10)+"px"||i}else for(var f in e){var o=n.camelCase(f);this[l].style[o]="number"==typeof e[f]&&!r[o]&&parseInt(e[f],10)+"px"||e[f]}}return this}},data:function(e,t){return n.data(this,e,t)},empty:function(){if(this[0]!==t){for(var e=0,n=this.length;n>e;e++)this[e].innerHTML="";return this}},end:function(){return this.prevObject||n()},eq:function(e){return n(0>e?this.slice(e):this.slice(e,+e+1))},find:function(e){var t;return t=1==this.length?n.query(e,this[0]):n.map(this,function(t){return n.query(e,t)}),this.chain(n(t))},first:function(){return this.eq(0)},filter:function(e){return n(y.call(this,function(t){return n.match(t,e)}))},get:function(e){return this[e]||b.call(this)},hasClass:function(e){return this[0]&&g(e).test(this[0].className)||!1},hide:function(){if(this[0]===t)return t;for(var e=0,n=this.length;n>e;e++)this[e].style.display="none";return this},html:function(e){if(this[0]===t)return t;if(!e)return this[0].innerHTML;for(var i=0,r=this.length;r>i;i++){var s=this[i];s.innerHTML="",n(s).append(e)}return this},index:function(e){return this.length>0?e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0]):t},last:function(){return this.eq(-1)},map:function(e){return n.map(this,function(t,n){return e.call(t,n,t)})},offset:function(){if(0===this.length)return t;var n=this[0].getBoundingClientRect();return{bottom:n.top+n.height+e.pageYOffset,height:n.height,left:n.left+e.pageXOffset,right:n.left+n.width+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||i.body;e&&!n.pattern.root.test(e.nodeName)&&"static"===n(e).css("position");)e=e.offsetParent;return e})},parent:function(e){return this[0]&&this[0].parentNode&&this.chain(e?n(this[0].parentNode).filter(e):n(this[0].parentNode))||this},position:function(){if(0===this.length)return t;var e=n(this[0]),i=n(this.offsetParent()),r=this.offset(),s=i.eq(0),a=n.pattern.root.test(i[0].nodeName)?{top:0,left:0}:i.offset();return r.top-=e.css("marginTop")||0,r.left-=e.css("marginLeft")||0,a.top+=s.css("borderTopWidth")||0,a.left+=s.css("borderLeftWidth")||0,{top:r.top-a.top,left:r.left-a.left}},remove:function(){if(this[0]!==t){for(var e=0,n=this.length;n>e;e++){var i=this[e];i.parentNode&&i.parentNode.removeChild(i)}return this}},removeAttr:function(e){if(this[0]!==t){for(var n=0,i=this.length;i>n;n++){var r=this[n];if(1===r.nodeType)if("string"==typeof e)r.removeAttribute(e);else if("array"==typeof e)for(var s=0,a=e.length;a>s;s++){var o=e[s];r[o]&&r.removeAttribute(o)}}return this}},ready:function(e){return n.pattern.ready.test(i.readyState)?e.call():i.addEventListener("DOMContentLoaded",e,!1),this},show:function(){return this.each(function(){if("none"===this.style.display&&(this.style.display=null),"none"===S(this,null).display){var e=this.nodeName;if(!k[e]){var t=n(i.createElement(e)).appendTo("body"),r=t.css("display");t.remove(),k[e]="none"===r||""===r||isNaN(r)?"block":r}this.style.display=k[e]}})},size:function(){return this.length},slice:function(){return n(b.apply(this,arguments))},text:function(e){if(0===this.length)return t;if(!e)return this[0].textContent;for(var n=0,i=this.length;i>n;n++)this[n].textContent=e;return this},toggleClass:function(e,n){return 0===this.length?t:this[this.hasClass(e)?"removeClass":"addClass"](n&&n(e)||e)},val:function(e){if(this[0]!==t){if(e===t)return this[0].value;for(var n=0,i=this.length;i>n;n++)this[n].value=e;return this}}}),n.each(["is","not"],function(e,t){n.fn[t]=function(e){var n=this.filter(e).length>0;return"is"===t?!!e&&n:!(e&&n)}}),n.each(["add","push"],function(e,t){n.fn[t]=function(e,t){return this.chain(n.unique(n.merge(this,n(e,t))))}}),n.each(["replace","replaceWith","swap"],function(e,t){n.fn[t]=function(e){return this.before(e).remove()}}),n.each(["addClass","removeClass"],function(e,i){n.fn[i]=function(e){if(this[0]!==t){for(var r=0,s=this.length;s>r;r++){var a=this[r],o=n(a),l="addClass"===i,c=a.className+" ",u=[];if(!l&&(e===t||0===e.length))return a.className="";n.isFunction(e)?o[i](e.call(a,index,a.className)):(e.split(n.pattern.space).forEach(function(e){l?!g(e).test(a.className)&&u.push(e):a.className=a.className.replace(g(e)," ").trim()}),l&&(a.className=(c+=u.join(" ")).trim()))}return this}}}),n.each({parents:"parentNode",next:"nextElementSibling",prev:"previousElementSibling"},function(e,i){n.fn[e]=function(r){if(0===this.length)return t;for(var s=[],a=this;a.length>0;)a=n.map(a,function(e){return e=e[i],e&&9!==e.nodeType&&1===e.nodeType&&s.indexOf(e)<0?s.push(e)&&e:void 0});return s=this.chain(n(s).filter(r)),"parents"!==e?s.eq(0):s}}),n.each(["width","height","outerWidth","outerHeight"],function(e,i){n.fn[i]=function(e){var r=this[0],a=i.replace("outer","").toLowerCase(),o=n.camelCase("-"+a),l=0;if(!r)return t;if(n.isWindow(r))return r["inner"+o];if(9===r.nodeType){var c=s;return Math.max(r.body["scroll"+o],r.body["offset"+o],c["scroll"+o],c["offset"+o],c["client"+o])}return e!==t||~i.indexOf("outer")?~i.indexOf("outer")?(e===!0&&(l="width"===a?this.css("marginLeft")+this.css("marginRight"):this.css("marginTop")+this.css("marginBottom")),parseFloat(this.css(a)+l+("width"===a?this.css("paddingLeft")+this.css("paddingRight")+this.css("borderLeftWidth")+this.css("borderRightWidth"):this.css("paddingTop")+this.css("paddingBottom")+this.css("borderTopWidth")+this.css("borderBottomWidth")))):this.css(i,e):this.css(i)}});var N=["after","prepend","before","append","insertAfter","prependTo","insertBefore","appendTo"],R=function(e){var e=n.map(e,function(e){var t=typeof e;return e instanceof n||("object"===t||n.pattern.mixed.test(e)||(e=n.fragment(e)),e=n(e)),b.call(e)});return e},L=function(e,t){t(e);for(var n in e.childNodes)L(e.childNodes[n],t);return e},Q=function(t){var i=t.nodeName,r=/script/i.test(i),s=t.src&&t.src.length>0;null!==i&&r&&!s&&eval.call(e,t.innerHTML),("text/javascript"===t.type||r)&&s&&n.get(t.src,function(e){(1,eval)(e)})},_=function(e,t,i,r,s){for(var a=0,o=e.length;o>a;a++){var l,c,u=e[2>r||r>3&&5>r?e.length-a-1:a];n.pattern.manipulation.test(i)&&(c=t)&&(t=u)&&(u=c)&&null==c,l=r%2?t:t.parentNode,s&&length-1>r&&(u=u.cloneNode(!0)),l&&l.insertBefore(u,r?1===r?l.firstChild:2===r?t:null:t.nextSibling),L(u,function(e){Q(e)})}};n.each(N,function(e,i){n.fn[i]=function(){if(this[0]===t)return this;var r=R(n.toArray(arguments)),s=this.length,a=s>1;if(0===r.length)return this;n.pattern.manipulation.test(i)&&(e=N.indexOf(i.replace(n.pattern.manipulation,"").toLowerCase()));for(var o=0,l=s;l>o;o++)_(r,this[o],i,e,a);return this}}),n.each(["scrollLeft","scrollTop"],function(e,i){var r=/Top/.test(i),a=r?"pageYOffset":"pageXOffset";n.fn[i]=function(e){if(this[0]===t)return t;var o=this[0],l=n.isWindow(o)?o:9===o.nodeType?o.defaultView||o.parentWindow:!1;return e===t?l?a in l?l[a]:s[i]:o[i]:l?l.scrollTo(r?n(l).scrollLeft():e,r?e:n(l).scrollTop()):o[i]=e}}),n.each(["blur","change","click","dblclick","enter","error","focus","focusin","focusout","hashchange","keydown","keypress","keyup","leave","load","mousedown","mousemove","mouseout","mouseover","mouseenter","mouseleave","mouseup","resize","scroll","select","submit","unload"],function(e,i){n.fn[i]=function(e){var r={blur_:"focusout",enter:"focus",focus_:"focusin",leave:"blur",mouseenter:"mouseover",mouseleave:"mouseout",turn:"orientationchange"};return n.browser.webkit&&("blur"===i||"focus"===i)&&(i+="_"),e&&this.on(i+" "+r[i]||i,e)||this[0]&&this[0][i]&&this[0][i]()||t}}),n.each(["on","off","bind","unbind","attach","detach"],function(e,i){n.fn[i]=function(i,r,s,a){return 0!==this.length&&this[0]!==t?(null==s&&null==a?(a=r,r=s=t):null==a&&("string"==typeof r?(a=s,s=t):(a=s,s=r,r=t)),this.each(function(){n.events[0===e%2?"add":"remove"](this,i,a,r,s)})):void 0}}),n.apply(n.fn,{trigger:function(e,t){return n.isString(e)&&(e=n.events.create(e,t)),e.data=t,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})}});var F={},D={};F.click=F.mousedown=F.mouseup=F.mousemove="MouseEvents",n.events={types:F,add:function(e,i,r,s,a,o,l){var c=e.uid||(e.uid=B++),u=D[c]||(D[c]=[]),l=/focusin|focusout/i.test(i)?!0:l,f=function(t){return function(i){var r=n(i.target).closest(s,e).get(0);if(0!==r.length){var o=n.extend(n.events.proxy(i),{currentTarget:r,data:a});return t.apply(r,[o].concat(b.call(arguments,1)))}}};n.isFunction(a)&&(l=o,o=a,a=t),n.events.each(i,r,function(t,i){var r=o?o(i,t):s&&f(i),a=r||i,c=function(t){var n=a.apply(e,[t].concat(t.data));return n===!1&&t.preventDefault(),n},d=n.extend(n.events.namespace(t),{delegate:r,fn:i,i:u.length,proxy:c,selector:s});u.push(d),e.addEventListener(d.e,c,!!l)})},create:function(e,t){var r=i.createEvent(n.events.types[e]||"Events"),s=!0;if(t)for(var a in t)"bubbles"===a?s=!!t[a]:r[a]=t[a];return r.initEvent(e,s,!0,null,null,null,null,null,null,null,null,null,null,null,null),r},each:function(e,t,i){n.isObject(e)?n.each(e,i):(""+e).split(/\s/).forEach(function(e){i(e,t)})},find:function(e,t,i,r){if(t=n.events.namespace(t),t.ns)var s=new RegExp(t.ns,"g");return(D[e.uid]||[]).filter(function(e){return!(!e||t.e&&e.e!=t.e||t.ns&&!s.test(e.ns)||i&&""+e.fn!=""+i||r&&e.selector!=r)})},namespace:function(e){var t=e.split(".");return{e:t.shift(),ns:t.slice(0).sort().join(" ")}},proxy:function(e){var t=n.extend({originalEvent:e},e);return n.each({preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},function(n,i){t[n]=function(){return this[i]=function(){return!0},e[n].apply(e,arguments)},t[i]=function(){return!1}}),t},remove:function(e,t,i,r){n.events.each(t||"",i,function(t,i){n.events.find(e,t,i,r).forEach(function(t){delete D[e.uid][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}},n.pattern={callback:/=\?/,cssNumbers:/^((margin|padding|border)(top|right|bottom|left)(width|height)?|height|width|zindex?)$/i,escape:/('|\\)/g,fragments:/^\s*<(\w+|!)[^>]*>/,manipulation:/insert|to/i,mixed:/^(?:\s*<[\w!]+>|body|head|#\w(?:[\w-]*)|\.\w(?:[\w-]*))$/,nodes:/^(?:1|3|8|9|11)$/,numbers:/^(0|[1-9][0-9]*)$/i,protocol:/^((http|ftp|file)(s?)\:)?/,quotes:/^["']|["']$/g,ready:/^(?:complete|loaded|interactive)$/i,relative:/^([-+=])/,root:/^(?:body|html)$/i,space:/\s+/g,tags:/^[\w-]+$/,templates:{keys:/\{(\w+)\}/g,indexed:/\{(\d+)\}/g},trim:/^\s+|\s+$/g},n.browser={chrome:/chrome/i.test(u)&&e.v8Intl,firefox:/firefox/i.test(u),language:o&&o.toLowerCase(),msie:/msie/i.test(u),opera:/opera/i.test(u),prefix:/webkit/i.test(u)?"-webkit-":/firefox/i.test(u)?"-moz-":/opera/i.test(u)?"-o-":/msie/i.test(u)?"-ms-":"",safari:/safari/i.test(u)&&!e.v8Intl,version:l.match(/OS \d+_\d+/g)||l,webkit:/webkit/i.test(u)},n.browser.cleaned=n.browser.prefix.replace(/-/g,""),n.browser.nativeSelector=n.camelCase(n.browser.prefix.replace("-","")+"matchesSelector");var M=function(){var t=u||f||e.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}();n.device={idevice:/iphone|ipad|ipod/i.test(u),ipad:/ipad/i.test(u),iphone:/iphone/i.test(u),ipod:/ipod/i.test(u),isDesktop:!M,isMobile:M,name:c&&c.toLowerCase(),playbook:/playbook/i.test(u),touchpad:/hp-tablet/i.test(u)},n.os={android:/android/i.test(u),blackberry:/blackberry/i.test(u),bbmobile:/blackberry/i.test(u)&&/mobile/i.test(u),bb10:/bb10/i.test(u)&&/mobile/i.test(u),iOS:n.device.idevice,iOS4:/OS 4/i.test(n.browser.version),iOS5:/OS 5/i.test(n.browser.version),iOS6:/OS 6/i.test(n.browser.version),iOSVersion:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(u)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1,osx:/macintosh/i.test(u),webOS:/webos/i.test(u),windows:/windows/i.test(u)};var q=function(e){return n.camelCase(("ms"!==n.browser.cleaned?n.browser.prefix:n.browser.cleaned)+e)};n.supports={cssAnimationEvents:q("AnimationName")in s.style,cssTransform:q("Transform")in s.style,cssTransitionEnd:q("TransitionEnd")in e,cssTransition:q("Transition")in s.style,cssTransform3d:"WebKitCSSMatrix"in e&&"m11"in new WebKitCSSMatrix,homescreen:"standalone"in a,localStorage:typeof h!==t,pushState:"pushState"in d&&"replaceState"in d,retina:"devicePixelRatio"in e&&e.devicePixelRatio>1,touch:"ontouchstart"in e},n.apply(n,{blankIMG:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",emptyFn:function(){},loaderIMG:"data:image/gif;base64,R0lGODlhEAAQAMQAAP%2F%2F%2F%2B7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP%2F%2F%2FwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH%2FC05FVFNDQVBFMi4wAwEAAAAh%2BQQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl%2BFmXNEUEBVAYHToJAVZK%2FXWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej%2BFogNhtHyfRQFmIol5owmEta%2FfcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB%2Bsi6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp%2BRAWGyHg%2BDQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo%2FJ0lgqEpHgoO2%2BGIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB%2FmNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop%2FIgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw%2BELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE%2F5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs%3D",vars:{}});var H=0;return n.apply(n,{active:0,ajaxSettings:{accepts:{html:"text/html",json:"application/json",script:"text/javascript, application/javascript",text:"text/plain",xml:"application/xml, text/xml"},async:!0,beforeSend:n.emptyFn,complete:n.emptyFn,context:n(i),crossDomain:!1,error:n.emptyFn,global:!0,headers:{},success:n.emptyFn,timeout:0,type:"GET"},ajax:function(t){var i,r,t=n.extend({},t||{});for(i in n.ajaxSettings)i in t||(t[i]=n.ajaxSettings[i]);t.type=t.type.toUpperCase(),t.context=n(t.context),n.isObject(t.data)&&(t.data=n.params(t.data)),!t.url&&(t.url=e.location.toString()),t.crossDomain||(t.crossDomain=n.pattern.protocol.test(t.url)&&RegExp.$1!==e.location.host,r=RegExp.$1,t.headers["X-Requested-With"]="XMLHttpRequest");var s,a=t.xhr=new e.XMLHttpRequest,o=t.accepts[t.dataType],l=t.context,c=n.pattern.callback.test(t.url);if("GET"===t.type&&t.data&&(t.url+=t.url.indexOf("?")<0?"?"+t.data:"&"+t.data),"jsonp"===t.dataType||c)return c||(t.url=n.appendQuery(t.url,"callback=?")),n.jsonP(t);o&&(t.headers.Accept=o,a.overrideMimeType&&a.overrideMimeType(o.split(",")[1]||o.split(",")[0])),(t.contentType||t.data&&"GET"!==t.type)&&(t.headers["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),a.onreadystatechange=function(){var e,i,s=!1;if(n.active++,2===a.readyState&&l.trigger("ajaxStart",t.data),4===a.readyState){if(t.timeout>0&&(i=setTimeout(function(){a.onreadystatechange=n.emptyFn,a.abort(),t.error.call(l,a,"timeout"),l.trigger("ajaxError","timeout"),n.active--},t.timeout)),a.status>=200&&a.status<300||304==a.status||0==a.status&&"file:"==r){var o=t.dataType,e=a.responseText;try{"json"!==o||/^\s*$/.test(e)?"xml"===o?e=a.responseXML:"script"===o&&(1,eval)(e):e=n.parseJSON(e)}catch(c){s=c}s?(t.error.call(l,a,"parsererror",s),l.trigger("ajaxError",s)):(t.success.call(l,e,"success",a),l.trigger("ajaxSuccess",e))}else t.error.call(l,a,"parsererror",s),l.trigger("ajaxError",s);t.complete.call(l,a,s?"error":"success"),l.trigger("ajaxComplete",e),n.active--,clearTimeout(i)}},a.open(t.type,t.url,t.async);for(s in t.headers)a.setRequestHeader(s,t.headers[s]);return t.beforeSend.call(l,a,t)===!1?(a.abort(),!1):(a.send(t.data||null),a)},appendQuery:function(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")},jsonP:function(t){var r,s=i.createElement("script"),a="jsonpCallback"+H++,o=t.context;return e[a]=function(i){delete e[a],n(s).remove(),t.success.call(o,i),o.trigger("jsonpSuccess",i),r&&clearTimeout(r)&&(r=null)},s.src=t.url.replace(n.pattern.callback,"="+a),i.getElementsByTagName("head")[0].appendChild(s),s.onerror=function(){t.xhr.abort(),t.error.call(o,null,"error"),o.trigger("jsonpError","error")},t.timeout>0&&(r=setTimeout(function(){n(s).remove(),a in e&&(e[a]=n.emptyFn),t.error.call(o,null,"timeout"),o.trigger("jsonpError","timeout"),t.xhr.abort()},t.timeout)),{}},params:function(e){return n.serialize([],e).join("&").replace("%20","+")},serialize:function(e,t,i){var r=n.isArray(t),s=encodeURIComponent;return n.each(t,function(t,a){i&&(t=i+"["+(r?"":t)+"]"),n.isObject(a)?n.serialize(e,a,t):e.push(s(t)+"="+s(a))}),e}}),n.each(["get","getJSON"],function(e,t){n[t]=function(t,i,r){return n.isFunction(i)&&(r=i)&&(i={}),n.ajax({url:t,data:i,dataType:1>e?"html":"json",success:r})}}),n}();e.Tapjoy=I,"$"in e||(e.$=I)}(window),function(e,t){var n={},r=!1,s=!0;e.extend(n,{config:{labels:{actions:{download:i18n.t("actions.download"),series:i18n.t("actions.steps"),video:i18n.t("actions.video")},text:{offersby:i18n.t("powered_by",null,{placeholder:"Powered by"}),earn:i18n.t("earn"),error:i18n.t("load_error"),free:i18n.t("free"),points:i18n.t("points"),sale:i18n.t("sale",null,{placeholder:"sale"}),on:i18n.t("on",null,{placeholder:"on"}),exp:i18n.t("exp",null,{placeholder:"exp"}),remaining:i18n.t("remaining",null,{placeholder:"remaining"}),was:i18n.t("was",null,{placeholder:"was"})}},digits:{6:"six",7:"seven",8:"eight",9:"nine",10:"ten"},tpl:{banner:["{earn} {currency}"],cover:['<span class="play-wrapper"><span class="play"></span></span><img data-src="{icon}" src="{blank}" />','<img data-src="{icon}" src="{blank}" />'],meta:['<p class="metadata {device_type}"><span class="cost">{cost}</span><span class="divider">&nbsp;|&nbsp;</span><code class="{type}">&nbsp;</code>{action}</p>'],offersReward:['<div class="action rewarded"><div class="btn"><span class="payout">{payout}</span><span class="currency">{currency}</span><span class="custom_currency"></span></div></div><span class="meta-tablet">{metadata}</span>'],offersRewardSale:['<div class="action rewarded sale"><div class="btn"><span class="payout">{payout}</span><span class="currency">{currency}</span></div><div class="btn sale"><span class="arrow"></span><div class="payout-sale"><span class="was">{was}</span><span class="price">{retail}</span></div></div></div><span class="meta-tablet">{metadata}</span>'],offersNonReward:['<div class="action non-rewarded"><div class="btn"><span class="payout">'+i18n.t("tap_here",null,{placeholder:"Tap Here"})+'</span></div></div><span class="meta-tablet">{metadata}</span>'],offersRewardTiered:['<div class="action rewarded"><div class="btn"><span class="tiered">'+i18n.t("up_to",null,{placeholder:"Up to"})+'</span><span class="payout">{payout}</span><span class="currency">{currency}</span></div></div><span class="meta-tablet">{metadata}</span>'],offers:['<div class="details-wrap"><div class="details"><div class="icon-wrap {type}"><div class="icon {type}">{cover}</div></div><div class="info-wrap"><div class="info"><h3>{title}</h3><h5>{details}</h5><span class="meta-mobile">{metadata}</span></div></div></div></div>'],saleBanner:['<div class="offer-item-info"><div class="details-wrap"><div class="details"><div class="btn sale"><h3>{multiplier}</h3></div><div class="sale-message"><span class="sale-title">{message}</span><span class="sale-expire">{expires}</span></div></div></div></div>'],ratings:['<div class="ratings"><div class="rating star"></div><div class="rating star"></div><div class="rating star"></div><div class="rating star"></div><div class="rating star"></div></div>']}}}),e.extend(n,{createSale:function(){var t=this.data.currency_sale.end_time_diff,n=Math.floor(t/86400),i=Math.floor(t%86400/3600),r=this.config,s=this.container;
this.sale.multiplier=this.data.currency_sale.multiplier+"X",this.sale.expires=n>=1?i>=1?i18n.t("expires_in_days_hours",{x_days:1==n?i18n.t("1_day"):i18n.t("x_days",{days:n}),x_hours:1==i?i18n.t("1_hour"):i18n.t("x_hours",{hours:i})}):i18n.t("expires_in_days",{x_days:1==n?i18n.t("1_day"):i18n.t("x_days",{days:n})}):1>i?i18n.t("expires_in_less_hour"):i18n.t("expires_in_hours",{x_hours:1==i?i18n.t("1_hour"):i18n.t("x_hours",{hours:i})}),this.sale.type="sale",sale_msg=this.data.currency_sale.message?this.data.currency_sale.message:i18n.t("currency_sale_message",{multiplier:this.sale.multiplier}),s.addClass("has-sale");var a=r.tpl.saleBanner[0];return e("#sale-info").html(e.format(a,{sale:r.labels.text.sale,multiplier:this.sale.multiplier,message:sale_msg,expires:this.sale.expires})),!0},ellipsis:function(e,t){return e?e.substr(0,t-3)+(e.length<t?"":"..."):!1},endOfTheLine:function(e){return document.body.clientHeight<=window.innerHeight+e+window.pageYOffset},error:function(){var t=this;this.errorEl=e(document.createElement("li")).attr("id","load-error").html('<div id="reload-btn">'+this.config.labels.text.error+"</div>").appendTo(this.container).on("click",e.proxy(t.fetch,this))},fetch:function(){var t=this;return this.data.records&&0!=this.data.records&&s?(r||(this.loader.show(),r=!0,this.errorEl&&e(this.errorEl).remove(),e.ajax({url:this.url,data:{limit:this.offerLimit,start:this.offerStart,library_version:this.library_version},dataType:"json",timeout:15e3,success:function(e){r=!1,t.loader.hide(),e.offers.length>0?(t.loadOffers(e),t.getImages(),t.offerStart=t.offerStart+t.offerLimit+1,t.fetched==t.autoload&&t.more.length>0&&t.more.show(),0==e.records&&t.allOffersLoaded(),t.resizeTJCIframe()):(t.more.hide(),s=!1)},error:function(){t.loader.hide(),r=!1,t.error()}})),void 0):t.allOffersLoaded()},getImages:function(){var e=this;return 1==this.running?this.scheduled=1:(this.running=1,this.setImages(),window.setTimeout(function(){e.running=0,e.scheduled&&e.getImages(),e.scheduled=0},300)),this},init:function(){this.data=t,this.library_version=this.data.library_version,this.website_url=this.data.website_url,this.doc=e(document),this.win=e(window),this.banner=e("#branding"),this.loader=e("#loading"),this.more=e("#more"),this.reloaderror=e("#reload-btn"),this.container=e("#offers-list"),this.visit=e("#visit"),this.poweredby=e("#poweredby"),this.fineprint=e("#fineprint"),this.currency_sale_container=e("li#currency-sale"),this.category="all",this.sale={amount:"",expires:"",type:"normal"},this.data.currency_sale&&this.data.rewarded&&this.createSale(),this.offerParams={all:{offerIds:[]}},this.offerLimit=t.offerLimit||25,this.offerStart=t.offerStart||25,this.autoloadLimit=t.autoloadLimit||3,this.fetched=0,this.url=t.fetchURL,this.loadOffers(t),this.total=Math.round(this.win.height()/(e(".offer-item").height()+10))+1,this.layout().getImages().listen()},layout:function(){var t=this.config,n=(this.container,t.tpl.banner[0]);return this.data.rewarded&&this.banner.html(e.format(n,{amount:this.sale.amount,blank:e.blankIMG,currency:this.data.currencyName,earn:t.labels.text.earn,exp:t.labels.text.exp,expires:this.sale.expires,offers:t.labels.text.offersby,on:t.labels.text.on,position:"action-"+this.data.actionLocation+"-side",remaining:t.labels.text.remaining,sale:t.labels.text.sale,sdk:this.data.iosSdk9plus?"ios-sdk-9plus":"standard",special:"sale"===this.sale.type?"":"hide",type:this.sale.type})),this.data.records&&0!=this.data.records||this.more.hide(),this},listen:function(){var t=this;return this.win.on("message",function(e){e.origin===t.website_url&&t.win[0].dispatchEvent(new Event(e.data))}),this.win.on("scroll",function(){t.getImages(),this.data.autoload&&t.fetched<t.autoload&&t.endOfTheLine(70)&&!t.fetching&&(t.fetch(),t.fetched++)}),this.more.on("click",e.proxy(this.fetch,this)),this.win.on("orientationchange",function(){t.resizeEvents()}),this},loadOffers:function(t){var n=this.config;if(this.data=t||this.data,!this.data||this.data&&0===this.data.length&&!this.errorEl)return this.error();this.errorEl&&this.errorEl.length>0&&e(this.errorEl).remove(),this.data.hasSdklessOffer&&"undefined"==typeof Tapjoy.SDKLessRejector&&loadSDKLessAssets();for(var i=0,r=this.data.offers.length;r>i;i++){var s,a=e(document.createElement("li")),o=this.data.offers[i],l=o.type.toLowerCase(),c=(o.redirectURL.match(/\?/)?"&":"?",this.data.currencyName.length,o.payout.length),u="iconURL",f="iconURL";if(o.sha1_id){if(-1!==e.inArray(o.sha1_id,this.offerParams[this.category].offerIds))continue;this.offerParams[this.category].offerIds.push(o.sha1_id)}offerType=this.data.rewarded?this.data.currency_sale?"offersRewardSale":o.tiered?"offersRewardTiered":"offersReward":"offersNonReward",o.free=n.labels.text.free,o.currency=this.data.currencyName,o.earn=n.labels.text.earn,o.retail=o.payout,this.data.currency_sale&&(o.retail=Math.floor(o.payout/this.data.currency_sale.multiplier),0==o.retail&&(offerType="offersReward"),o.was=n.labels.text.was),o.wifi=o.requiresWifi?'<div class="wifi">WiFi</div>':"",o.action=o.summary?o.summary:n.labels.actions[l]||"",o.cover=e.format(n.tpl.cover["video"===l?0:1],{icon:o["video"===l?f:u],blank:e.blankIMG}),o.metadata=e.format(n.tpl.meta[0],o),s=e.format(n.tpl.offers[0],o)+e.format(n.tpl[offerType][0],o);var d="";"download"==l&&"tj_games"==this.data.source&&(d="target='_blank'"),a.addClass("offer-item").html('<a href="'+o.redirectURL+'" '+d+'><div class="offer-item-info">'+s+"</div></a>").appendTo(this.container),o.sdkless&&(a.addClass("sdkless"),a.attr("data-bundle-id",o.store_id),a.attr("data-bundle-protocol",o.protocol_handler)),c>5&&e(".big",a).addClass(c>5&&9>c?n.digits[c]:c>9?"large":"large"),0!==o.wifi.length&&e(".icon",a).addClass("mtn")}return this.resizeTJCIframe(),this},setImages:function(){this.endOfTheLine(70)&&this.fetch();var t=e(".icon img:not(.loaded)"),n=140,r=140;for(i=0,k=t.length;k>i;i++){var s=e(t[i]);if(s&&(this.ViewPort.aboveInView(s,{padding:r,threshold:n})||"tj_games"==this.data.source)){var a,o,l=s.data("src");l&&s.attr("src",l).load(function(){a=this.width,o=this.height,a==o&&e(this).addClass("square").closest(".icon-wrap").addClass("square")}).addClass("loaded")}}},ViewPort:{belowView:function(t,n){var i=n&&n.padding?n.padding:0,r=n&&n.threshold?n.threshold:0,s=e(window).height()+e(window).scrollTop()+i;return s<=e(t).offset().top-r},aboveView:function(t,n){var i=n&&n.padding?n.padding:0,r=n&&n.threshold?n.threshold:0,s=e(window).scrollTop()+i;return s>=e(t).offset().top+e(t).height()-r},aboveInView:function(e,t){return!this.belowView(e,t)||this.aboveView(e,t)},inView:function(e,t){return!this.belowView(e,t)}},truncate:function(t,n){var i=this;return e(t,document),e(t,document).each(function(e){var t=e.innerHTML;e.innerHTML=i.ellipsis(t,n||70)}),!0},allOffersLoaded:function(){this.more.hide(),this.fineprint.addClass("no-offers"),this.resizeTJCIframe()},resizeEvents:function(){this.resizeTJCIframe(),setTimeout(function(){window.scrollTo(0,1)},50)},resizeTJCIframe:function(){"tj_games"==this.data.source&&"undefined"!=typeof this.website_url&&window.parent.postMessage(document.body.scrollHeight,this.website_url)}}),e(n.init())}(Tapjoy,data);