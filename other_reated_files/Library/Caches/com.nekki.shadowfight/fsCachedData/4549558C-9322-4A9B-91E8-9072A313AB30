var Zepto=function(){function t(t){return null==t?String(t):Z[z.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function o(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function i(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return x.call(t,function(t){return null!=t})}function p(t){return t.length>0?B.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in C?C[t]:C[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function l(t,e){return"number"!=typeof e||R[c(t)]?e:e+"px"}function d(t){var e,n;return P[t]||(e=k.createElement(t),k.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),P[t]=n),P[t]}function f(t){return"children"in t?_.call(t.children):B.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function h(t,e,n){for(b in e)n&&(i(e[b])||Q(e[b]))?(i(e[b])&&!i(t[b])&&(t[b]={}),Q(e[b])&&!Q(t[b])&&(t[b]=[]),h(t[b],e[b],n)):e[b]!==M&&(t[b]=e[b])}function y(t,e){return null==e?B(t):B(t).filter(e)}function g(t,n,o,r){return e(n)?n.call(t,o,r):n}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function v(t,e){var n=t.className,o=n&&n.baseVal!==M;return e===M?o?n.baseVal:n:void(o?n.baseVal=e:t.className=e)}function E(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?B.parseJSON(t):t:e):t}catch(n){return t}}function S(t,e){e(t);for(var n=0,o=t.childNodes.length;o>n;n++)S(t.childNodes[n],e)}var M,b,B,A,w,I,T=[],_=T.slice,x=T.filter,k=window.document,P={},C={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},N=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,D=/([A-Z])/g,V=["val","css","html","text","data","width","height","offset"],j=["after","prepend","before","append"],H=k.createElement("table"),F=k.createElement("tr"),G={tr:k.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:F,th:F,"*":k.createElement("div")},W=/complete|loaded|interactive/,$=/^[\w-]*$/,Z={},z=Z.toString,Y={},J=k.createElement("div"),q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(t){return t instanceof Array};return Y.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var o,r=t.parentNode,i=!r;return i&&(r=J).appendChild(t),o=~Y.qsa(r,e).indexOf(t),i&&J.removeChild(t),o},w=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},I=function(t){return x.call(t,function(e,n){return t.indexOf(e)==n})},Y.fragment=function(t,e,n){var o,r,a;return L.test(t)&&(o=B(k.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(O,"<$1></$2>")),e===M&&(e=N.test(t)&&RegExp.$1),e in G||(e="*"),a=G[e],a.innerHTML=""+t,o=B.each(_.call(a.childNodes),function(){a.removeChild(this)})),i(n)&&(r=B(o),B.each(n,function(t,e){V.indexOf(t)>-1?r[t](e):r.attr(t,e)})),o},Y.Z=function(t,e){return t=t||[],t.__proto__=B.fn,t.selector=e||"",t},Y.isZ=function(t){return t instanceof Y.Z},Y.init=function(t,n){var o;if(!t)return Y.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&N.test(t))o=Y.fragment(t,RegExp.$1,n),t=null;else{if(n!==M)return B(n).find(t);o=Y.qsa(k,t)}else{if(e(t))return B(k).ready(t);if(Y.isZ(t))return t;if(Q(t))o=s(t);else if(r(t))o=[t],t=null;else if(N.test(t))o=Y.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==M)return B(n).find(t);o=Y.qsa(k,t)}}return Y.Z(o,t)},B=function(t,e){return Y.init(t,e)},B.extend=function(t){var e,n=_.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){h(t,n,e)}),t},Y.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],a=r||i?e.slice(1):e,s=$.test(a);return o(t)&&s&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:_.call(s&&!r?i?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},B.contains=k.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},B.type=t,B.isFunction=e,B.isWindow=n,B.isArray=Q,B.isPlainObject=i,B.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},B.inArray=function(t,e,n){return T.indexOf.call(e,t,n)},B.camelCase=w,B.trim=function(t){return null==t?"":String.prototype.trim.call(t)},B.uuid=0,B.support={},B.expr={},B.map=function(t,e){var n,o,r,i=[];if(a(t))for(o=0;o<t.length;o++)n=e(t[o],o),null!=n&&i.push(n);else for(r in t)n=e(t[r],r),null!=n&&i.push(n);return p(i)},B.each=function(t,e){var n,o;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(o in t)if(e.call(t[o],o,t[o])===!1)return t;return t},B.grep=function(t,e){return x.call(t,e)},window.JSON&&(B.parseJSON=JSON.parse),B.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()}),B.fn={forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,indexOf:T.indexOf,concat:T.concat,map:function(t){return B(B.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return B(_.apply(this,arguments))},ready:function(t){return W.test(k.readyState)&&k.body?t(B):k.addEventListener("DOMContentLoaded",function(){t(B)},!1),this},get:function(t){return t===M?_.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return T.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):B(x.call(this,function(e){return Y.matches(e,t)}))},add:function(t,e){return B(I(this.concat(B(t,e))))},is:function(t){return this.length>0&&Y.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==M)this.each(function(e){t.call(this,e)||n.push(this)});else{var o="string"==typeof t?this.filter(t):a(t)&&e(t.item)?_.call(t):B(t);this.forEach(function(t){o.indexOf(t)<0&&n.push(t)})}return B(n)},has:function(t){return this.filter(function(){return r(t)?B.contains(this,t):B(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:B(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:B(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?B(t).filter(function(){var t=this;return T.some.call(n,function(e){return B.contains(e,t)})}):1==this.length?B(Y.qsa(this[0],t)):this.map(function(){return Y.qsa(this,t)}):[]},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=B(t));n&&!(r?r.indexOf(n)>=0:Y.matches(n,t));)n=n!==e&&!o(n)&&n.parentNode;return B(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=B.map(n,function(t){return(t=t.parentNode)&&!o(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return y(e,t)},parent:function(t){return y(I(this.pluck("parentNode")),t)},children:function(t){return y(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return _.call(this.childNodes)})},siblings:function(t){return y(this.map(function(t,e){return x.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return B.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var o=B(t).get(0),r=o.parentNode||this.length>1;return this.each(function(e){B(this).wrapAll(n?t.call(this,e):r?o.cloneNode(!0):o)})},wrapAll:function(t){if(this[0]){B(this[0]).before(t=B(t));for(var e;(e=t.children()).length;)t=e.first();B(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var o=B(this),r=o.contents(),i=n?t.call(this,e):t;r.length?r.wrapAll(i):o.append(i)})},unwrap:function(){return this.parent().each(function(){B(this).replaceWith(B(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=B(this);(t===M?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return B(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return B(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;B(this).empty().append(g(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=g(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(b in t)m(this,b,t[b]);else m(this,t,g(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:M},removeAttr:function(t){return this.each(function(){1===this.nodeType&&m(this,t)})},prop:function(t,e){return t=q[t]||t,1 in arguments?this.each(function(n){this[t]=g(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(D,"-$1").toLowerCase(),o=1 in arguments?this.attr(n,e):this.attr(n);return null!==o?E(o):M},val:function(t){return 0 in arguments?this.each(function(e){this.value=g(this,t,e,this.value)}):this[0]&&(this[0].multiple?B(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=B(this),o=g(this,t,e,n.offset()),r=n.offsetParent().offset(),i={top:o.top-r.top,left:o.left-r.left};"static"==n.css("position")&&(i.position="relative"),n.css(i)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var o=this[0],r=getComputedStyle(o,"");if(!o)return;if("string"==typeof e)return o.style[w(e)]||r.getPropertyValue(e);if(Q(e)){var i={};return B.each(Q(e)?e:[e],function(t,e){i[e]=o.style[w(e)]||r.getPropertyValue(e)}),i}}var a="";if("string"==t(e))n||0===n?a=c(e)+":"+l(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(b in e)e[b]||0===e[b]?a+=c(b)+":"+l(b,e[b])+";":this.each(function(){this.style.removeProperty(c(b))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(B(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?T.some.call(this,function(t){return this.test(v(t))},u(t)):!1},addClass:function(t){return t?this.each(function(e){A=[];var n=v(this),o=g(this,t,e,n);o.split(/\s+/g).forEach(function(t){B(this).hasClass(t)||A.push(t)},this),A.length&&v(this,n+(n?" ":"")+A.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===M?v(this,""):(A=v(this),g(this,t,e,A).split(/\s+/g).forEach(function(t){A=A.replace(u(t)," ")}),void v(this,A.trim()))})},toggleClass:function(t,e){return t?this.each(function(n){var o=B(this),r=g(this,t,n,v(this));r.split(/\s+/g).forEach(function(t){(e===M?!o.hasClass(t):e)?o.addClass(t):o.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===M?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===M?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),o=U.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(B(t).css("margin-top"))||0,n.left-=parseFloat(B(t).css("margin-left"))||0,o.top+=parseFloat(B(e[0]).css("border-top-width"))||0,o.left+=parseFloat(B(e[0]).css("border-left-width"))||0,{top:n.top-o.top,left:n.left-o.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||k.body;t&&!U.test(t.nodeName)&&"static"==B(t).css("position");)t=t.offsetParent;return t})}},B.fn.detach=B.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});B.fn[t]=function(r){var i,a=this[0];return r===M?n(a)?a["inner"+e]:o(a)?a.documentElement["scroll"+e]:(i=this.offset())&&i[t]:this.each(function(e){a=B(this),a.css(t,g(this,r,e,a[t]()))})}}),j.forEach(function(e,n){var o=n%2;B.fn[e]=function(){var e,r,i=B.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:Y.fragment(n)}),a=this.length>1;return i.length<1?this:this.each(function(t,e){r=o?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=B.contains(k.documentElement,r);i.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return B(t).remove();r.insertBefore(t,e),s&&S(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},B.fn[o?e+"To":"insert"+(n?"Before":"After")]=function(t){return B(t)[e](this),this}}),Y.Z.prototype=B.fn,Y.uniq=I,Y.deserializeValue=E,B.zepto=Y,B}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=d++)}function n(t,n,i,a){if(n=o(n),n.ns)var s=r(n.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||i&&e(t.fn)!==e(i)||a&&t.sel!=a)})}function o(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function i(t,e){return t.del&&!v&&t.e in E||!!e}function a(t){return S[t]||v&&E[t]||t}function s(n,r,s,p,u,d,f){var h=e(n),y=g[h]||(g[h]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=o(e);r.fn=s,r.sel=u,r.e in S&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=d;var h=d||s;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=p;var e=h.apply(n,t._args==l?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=y.length,y.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,i(r,f))})}function p(t,o,r,s,p){var c=e(t);(o||"").split(/\s/).forEach(function(e){n(t,e,r,s).forEach(function(e){delete g[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,i(e,p))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(A,function(t,o){var r=n[t];e[t]=function(){return this[o]=M,r&&r.apply(n,arguments)},e[o]=b}),(n.defaultPrevented!==l?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=M)),e}function u(t){var e,n={originalEvent:t};for(e in t)B.test(e)||t[e]===l||(n[e]=t[e]);return c(n,t)}var l,d=1,f=Array.prototype.slice,h=t.isFunction,y=function(t){return"string"==typeof t},g={},m={},v="onfocusin"in window,E={focus:"focusin",blur:"focusout"},S={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",t.event={add:s,remove:p},t.proxy=function(n,o){var r=2 in arguments&&f.call(arguments,2);if(h(n)){var i=function(){return n.apply(o,r?r.concat(f.call(arguments)):arguments)};return i._zid=e(n),i}if(y(o))return r?(r.unshift(n[o],n),t.proxy.apply(null,r)):t.proxy(n[o],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,o){return this.on(t,e,n,o,1)};var M=function(){return!0},b=function(){return!1},B=/^([A-Z]|returnValue$|layer[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,o,r,i){var a,c,d=this;return e&&!y(e)?(t.each(e,function(t,e){d.on(t,n,o,e,i)}),d):(y(n)||h(r)||r===!1||(r=o,o=n,n=l),(h(o)||o===!1)&&(r=o,o=l),r===!1&&(r=b),d.each(function(l,d){i&&(a=function(t){return p(d,t.type,r),r.apply(this,arguments)}),n&&(c=function(e){var o,i=t(e.target).closest(n,d).get(0);return i&&i!==d?(o=t.extend(u(e),{currentTarget:i,liveFired:d}),(a||r).apply(i,[o].concat(f.call(arguments,1)))):void 0}),s(d,e,r,o,n,c||a)}))},t.fn.off=function(e,n,o){var r=this;return e&&!y(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(y(n)||h(o)||o===!1||(o=n,n=l),o===!1&&(o=b),r.each(function(){p(this,e,o,n)}))},t.fn.trigger=function(e,n){return e=y(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,o){var r,i;return this.each(function(a,s){r=u(y(e)?t.Event(e):e),r._args=o,r.target=s,t.each(n(s,e.type||e),function(t,e){return i=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){y(t)||(e=t,t=e.type);var n=document.createEvent(m[t]||"Events"),o=!0;if(e)for(var r in e)"bubbles"==r?o=!!e[r]:n[r]=e[r];return n.initEvent(t,o,!0),c(n)}}(Zepto),function(t){function e(e,n,o){var r=t.Event(n);return t(e).trigger(r,o),!r.isDefaultPrevented()}function n(t,n,o,r){return t.global?e(n||v,o,r):void 0}function o(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function i(t,e){var o=e.context;return e.beforeSend.call(o,t,e)===!1||n(e,o,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,o,"ajaxSend",[t,e])}function a(t,e,o,r){var i=o.context,a="success";o.success.call(i,t,a,e),r&&r.resolveWith(i,[t,a,e]),n(o,i,"ajaxSuccess",[e,o,t]),p(a,e,o)}function s(t,e,o,r,i){var a=r.context;r.error.call(a,o,e,t),i&&i.rejectWith(a,[o,e,t]),n(r,a,"ajaxError",[o,r,t||e]),p(e,o,r)}function p(t,e,o){var i=o.context;o.complete.call(i,e,t),n(o,i,"ajaxComplete",[e,o]),r(o)}function c(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==B?"html":t==b?"json":S.test(t)?"script":M.test(t)&&"xml")||"text"}function l(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data),e.data=void 0)}function f(e,n,o,r){return t.isFunction(n)&&(r=o,o=n,n=void 0),t.isFunction(o)||(r=o,o=void 0),{url:e,data:n,success:o,dataType:r}}function h(e,n,o,r){var i,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,p){i=t.type(p),r&&(n=o?r:r+"["+(s||"object"==i||"array"==i?n:"")+"]"),!r&&a?e.add(p.name,p.value):"array"==i||!o&&"object"==i?h(e,p,o,n):e.add(n,p)})}var y,g,m=0,v=window.document,E=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,S=/^(?:text|application)\/javascript/i,M=/^(?:text|application)\/xml/i,b="application/json",B="text/html",A=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var o,r,p=e.jsonpCallback,c=(t.isFunction(p)?p():p)||"jsonp"+ ++m,u=v.createElement("script"),l=window[c],d=function(e){t(u).triggerHandler("error",e||"abort")},f={abort:d};return n&&n.promise(f),t(u).on("load error",function(i,p){clearTimeout(r),t(u).off().remove(),"error"!=i.type&&o?a(o[0],f,e,n):s(null,p||"error",f,e,n),window[c]=l,o&&t.isFunction(l)&&l(o[0]),l=o=void 0}),i(f,e)===!1?(d("abort"),f):(window[c]=function(){o=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),v.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){d("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:b,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),r=t.Deferred&&t.Deferred();for(y in t.ajaxSettings)void 0===n[y]&&(n[y]=t.ajaxSettings[y]);o(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),d(n);var p=n.dataType,f=/\?.+=\?/.test(n.url);if(f&&(p="jsonp"),n.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(n.url=l(n.url,"_="+Date.now())),"jsonp"==p)return f||(n.url=l(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,r);var h,m=n.accepts[p],v={},E=function(t,e){v[t.toLowerCase()]=[t,e]},S=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,M=n.xhr(),b=M.setRequestHeader;if(r&&r.promise(M),n.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",m||"*/*"),(m=n.mimeType||m)&&(m.indexOf(",")>-1&&(m=m.split(",",2)[0]),M.overrideMimeType&&M.overrideMimeType(m)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&E("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(g in n.headers)E(g,n.headers[g]);if(M.setRequestHeader=E,M.onreadystatechange=function(){if(4==M.readyState){M.onreadystatechange=c,clearTimeout(h);var e,o=!1;if(M.status>=200&&M.status<300||304==M.status||0==M.status&&"file:"==S){p=p||u(n.mimeType||M.getResponseHeader("content-type")),e=M.responseText;try{"script"==p?(1,eval)(e):"xml"==p?e=M.responseXML:"json"==p&&(e=A.test(e)?null:t.parseJSON(e))}catch(i){o=i}o?s(o,"parsererror",M,n,r):a(e,M,n,r)}else s(M.statusText||null,M.status?"error":"abort",M,n,r)}},i(M,n)===!1)return M.abort(),s(null,"abort",M,n,r),M;var B="async"in n?n.async:!0;if(M.open(n.type,n.url,B,n.username,n.password),n.xhrFields)for(g in n.xhrFields)M[g]=n.xhrFields[g];for(g in v)b.apply(M,v[g]);return n.timeout>0&&(h=setTimeout(function(){M.onreadystatechange=c,M.abort(),s(null,"timeout",M,n,r)},n.timeout)),M.send(n.data?n.data:null),M},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,o){if(!this.length)return this;var r,i=this,a=e.split(/\s/),s=f(e,n,o),p=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){i.html(r?t("<div>").html(e.replace(E,"")).find(r):e),p&&p.apply(i,arguments)},t.ajax(s),this};var w=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(w(t)+"="+w(e))},h(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var o=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=o&&"reset"!=o&&"button"!=o&&("radio"!=o&&"checkbox"!=o||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),function(t){if("function"==typeof bootstrap)bootstrap("spdmvast",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeSPDMVAST=t}else"undefined"!=typeof window?window.SPDMVAST=t():global.SPDMVAST=t()}(function(){return function(t,e,n){function o(n,i){if(!e[n]){if(!t[n]){var a="function"==typeof require&&require;if(!i&&a)return a(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=e[n]={exports:{}};t[n][0].call(s.exports,function(e){var r=t[n][1][e];return o(r?r:e)},s,s.exports)}return e[n].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e){e.exports={client:t("./client.coffee"),parser:t("./parser.coffee"),util:t("./util.coffee")}},{"./client.coffee":2,"./parser.coffee":3,"./util.coffee":4}],2:[function(t,e){var n,o;o=t("./parser.coffee"),n=function(){function t(){}return t.totalCalls=0,t.cappingFreeLunch=0,t.cappingMinimumTimeInterval=0,t.timeout=0,t.get=function(t,e){return this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void e(null):(new Date).getTime()-this.lastSuccessfulAd<this.cappingMinimumTimeInterval?void e(null):o.parse(t,function(t){return this.lastSuccessfulAd=(new Date).getTime(),e(t)})},t}(),e.exports=n},{"./parser.coffee":3}],4:[function(t,e){var n;n=function(){function t(){}return t.resolveURLTemplates=function(t,e){var n,o,r,i,a,s,p,c,u,l,d;o=[],null==e&&(e={}),"CACHEBUSTING"in e||(e.CACHEBUSTING=Math.round(1e10*Math.random())),e.random=e.CACHEBUSTING;for(p=0,u=t.length;u>p;p++){for(n=t[p],a=n,d=["CACHEBUSTING","random","CONTENTPLAYHEAD","ASSETURI","ERRORCODE"],c=0,l=d.length;l>c;c++)i=d[c],r="["+i+"]",s=e[i],a=a.replace(r,s);o.push(a)}return o},t}(),e.exports=n},{}],3:[function(t,e){var n,o,r,i,a,s,p,c=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("./urlhandler.coffee"),s=t("./response.coffee"),o=t("./ad.coffee"),p=t("./util.coffee"),r=t("./creative.coffee").VASTCreativeLinear,i=t("./mediafile.coffee"),a=function(){function t(){}return t.wrapperTracks=[],t.parse=function(e,n){return this.wrapperTracks=[],this._parse(e,null,function(e,o){return o&&(o.wrapperTracks=t.wrapperTracks),n(o)})},t._parse=function(t,e,o){var r=this;return null==e&&(e=[]),e.push(t),n.get(t,function(n,i){var a,p,u,l,d,f,h,y,g,m,v,E,S,M,b;if(null!=n)return o(n);if(d=new s,null==(null!=i?i.documentElement:void 0)||"VAST"!==i.documentElement.nodeName)return o();for(E=i.documentElement.childNodes,f=0,g=E.length;g>f;f++)l=E[f],"Error"===l.nodeName&&d.errorURLTemplates.push(l.textContent);for(S=i.documentElement.childNodes,h=0,m=S.length;m>h;h++)if(l=S[h],"Ad"===l.nodeName&&(a=r.parseAdElement(l),null!=a)){if(a.nextWrapperURL){var B={};if(a.impressionURLTemplates.length>0){B.trackingEvents=[];for(var A=0;A<a.creatives.length;A++)B.trackingEvents.push(a.creatives[A].trackingEvents)}r.wrapperTracks.push(B)}d.ads.push(a)}for(u=function(){var t,e,n,r;if(d){for(r=d.ads,e=0,n=r.length;n>e;e++)if(t=r[e],null!=t.nextWrapperURL)return;return 0===d.ads.length&&(d=null),o(null,d)}},M=d.ads,y=0,v=M.length;v>y;y++)if(a=M[y],null!=a.nextWrapperURL){if(e.length>=10||(b=a.nextWrapperURL,c.call(e,b)>=0)){d.ads.splice(d.ads.indexOf(a),1),u();break}-1===a.nextWrapperURL.indexOf("://")&&(p=t.slice(0,t.lastIndexOf("/")),a.nextWrapperURL=""+p+"/"+a.nextWrapperURL),r._parse(a.nextWrapperURL,e,function(t,e){var n,o,r,i,s;if(null!=t)d.ads.splice(d.ads.indexOf(a),1);else if(null==e)d.ads.splice(d.ads.indexOf(a),1);else for(d.errorURLTemplates=d.errorURLTemplates.concat(e.errorURLTemplates),n=d.ads.indexOf(a),d.ads.splice(n,1),s=e.ads,r=0,i=s.length;i>r;r++)o=s[r],o.errorURLTemplates=a.errorURLTemplates.concat(o.errorURLTemplates),o.impressionURLTemplates=a.impressionURLTemplates.concat(o.impressionURLTemplates),d.ads.splice(n,0,o);return u()})}return u()})},t.childByName=function(t,e){var n,o,r,i;for(i=t.childNodes,o=0,r=i.length;r>o;o++)if(n=i[o],n.nodeName===e)return n},t.childsByName=function(t,e){var n,o,r,i,a;for(o=[],a=t.childNodes,r=0,i=a.length;i>r;r++)n=a[r],n.nodeName===e&&o.push(n);return o},t.parseAdElement=function(t){var e,n,o,r;for(r=t.childNodes,n=0,o=r.length;o>n;n++){if(e=r[n],"Wrapper"===e.nodeName)return this.parseWrapperElement(e);if("InLine"===e.nodeName)return this.parseInLineElement(e)}},t.parseWrapperElement=function(t){var e,n;e=this.parseInLineElement(t),n=this.childByName(t,"VASTAdTagURI"),null!=n&&(e.nextWrapperURL=n.textContent);for(var o=t.childNodes,i=0,a=o.length;a>i;i++)if("Creatives"==o[i].nodeName)for(var s=this.childByName(o[i],"Creative").childNodes,p=0,c=s.length;c>p;p++)if("Linear"==s[p].nodeName){for(var u=new r,l=this.childByName(s[p],"TrackingEvents")?this.childByName(s[p],"TrackingEvents").childNodes:[],d=0,f=l.length;f>d;d++)if("Tracking"==l[d].nodeName){var h=l[d].getAttribute("event"),y=l[d].textContent;null!=h&&null!=y&&(null==(_base=u.trackingEvents)[h]&&(_base[h]=[]),u.trackingEvents[h].push(y))}u&&e.creatives.push(u)}return null!=e.nextWrapperURL?e:void 0},t.parseInLineElement=function(t){var e,n,r,i,a,s,p,c,u,l,d;for(e=new o,l=t.childNodes,s=0,c=l.length;c>s;s++)switch(a=l[s],a.nodeName){case"Error":e.errorURLTemplates.push(a.textContent);break;case"Impression":e.impressionURLTemplates.push(a.textContent);break;case"Creatives":for(r=this.childByName(a,"Creative"),d=r.childNodes,p=0,u=d.length;u>p;p++)switch(i=d[p],i.nodeName){case"Linear":n=this.parseCreativeLinearElement(i),n&&e.creatives.push(n)}}return e},t.parseCreativeLinearElement=function(t){var e,n,o,a,s,p,c,u,l,d,f,h,y,g,m,v,E,S,M,b,B,A,w,I,T,_,x;if(e=new r,e.duration=this.parseDuration(null!=(B=this.childByName(t,"Duration"))?B.textContent:void 0),-1===e.duration)return null;for(c=t.getAttribute("skipoffset"),null!=c&&"%"===c[c.length-1]?(p=parseInt(c),e.skipOffset=e.duration*(p/100)):e.skipOffset=this.parseDuration(c),f=this.childByName(t,"VideoClicks"),null!=f&&(e.videoClickThroughURLTemplate=null!=(A=this.childByName(f,"ClickThrough"))?A.textContent:void 0,e.videoClickTrackingURLTemplate=null!=(w=this.childByName(f,"ClickTracking"))?w.textContent:void 0),I=this.childsByName(t,"TrackingEvents"),y=0,E=I.length;E>y;y++)for(l=I[y],T=this.childsByName(l,"Tracking"),g=0,S=T.length;S>g;g++)u=T[g],n=u.getAttribute("event"),d=u.textContent,null!=n&&null!=d&&(null==(h=e.trackingEvents)[n]&&(h[n]=[]),e.trackingEvents[n].push(d));for(_=this.childsByName(t,"MediaFiles"),m=0,M=_.length;M>m;m++)for(s=_[m],x=this.childsByName(s,"MediaFile"),v=0,b=x.length;b>v;v++)a=x[v],o=new i,o.fileURL=a.textContent,o.deliveryType=a.getAttribute("delivery"),o.codec=a.getAttribute("codec"),o.mimeType=a.getAttribute("type"),o.bitrate=parseInt(a.getAttribute("bitrate")||0),o.minBitrate=parseInt(a.getAttribute("minBitrate")||0),o.maxBitrate=parseInt(a.getAttribute("maxBitrate")||0),o.width=parseInt(a.getAttribute("width")||0),o.height=parseInt(a.getAttribute("height")||0),e.mediaFiles.push(o);return e},t.parseDuration=function(t){var e,n,o,r,i;return null==t?-1:(e=t.split(":"),3!==e.length?-1:(i=e[2].split("."),r=parseInt(i[0]),2===i.length&&(r+=parseFloat("0."+i[1])),o=parseInt(60*e[1]),n=parseInt(60*e[0]*60),isNaN(n||isNaN(o||isNaN(r||o>3600||r>60)))?-1:n+o+r))},t}(),e.exports=a},{"./urlhandler.coffee":5,"./response.coffee":6,"./ad.coffee":7,"./util.coffee":4,"./creative.coffee":8,"./mediafile.coffee":9}],6:[function(t,e){var n;n=function(){function t(){this.ads=[],this.errorURLTemplates=[]}return t}(),e.exports=n},{}],5:[function(t,e){var n,o,r;r=t("./urlhandlers/xmlhttprequest.coffee"),o=t("./urlhandlers/flash.coffee"),n=function(){function e(){}return e.get=function(e,n){return"undefined"==typeof window||null===window?t("./urlhandlers/node.coffee").get(e,n):r.supported()?r.get(e,n):o.get(e,n)
},e}(),e.exports=n},{"./urlhandlers/xmlhttprequest.coffee":10,"./urlhandlers/flash.coffee":11}],8:[function(t,e){var n,o,r,i,a=Object.prototype.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=function(){function t(){this.trackingEvents={}}return t}(),r=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=-1,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplate=null}return s(e,t),e}(n),i=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return s(e,t),e}(n),o=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return s(e,t),e}(n),e.exports={VASTCreativeLinear:r,VASTCreativeNonLinear:i,VASTCreativeCompanion:o}},{}],7:[function(t,e){var n;n=function(){function t(){this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[]}return t}(),e.exports=n},{}],9:[function(t,e){var n;n=function(){function t(){this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0}return t}(),e.exports=n},{}],10:[function(t,e){var n;n=function(){function t(){}return t.xhr=function(){var t;return t=new window.XMLHttpRequest,"withCredentials"in t?t:void 0},t.supported=function(){return!!this.xhr()},t.get=function(t,e){var n;return n=this.xhr(),n.open("GET",t),n.send(),n.onreadystatechange=function(){return 4===n.readyState?e(null,n.responseXML):void 0}},t}(),e.exports=n},{}],11:[function(t,e){var n;n=function(){function t(){}return t.get=function(t,e){return e("not supported")},t}(),e.exports=n},{}]},{},[1])(1)});var Sponsorpay=Sponsorpay||{};Sponsorpay.MBE={},Sponsorpay.MBE.Utils=function(t,e){"use strict";var n=null,o=t.navigator.userAgent;return{loadedScripts:[],isIOS:function(){return!1==!!o.match(/(iPad|iPhone|iPod)/i)?e("body").hasClass("ios"):!0},getIOSMajorVersion:function(){var t=o.match(/CPU (?:i(?:Phone|Pad|Pod))*\s*OS (\d)_(\d)/);return t?parseInt(t[1],10):0},isIPAD:function(){return!!o.match(/iPad/i)},isTouchDevice:function(){return!!("ontouchstart"in t)||!!("onmsgesturechange"in t)},isSafari:function(){return!!o.match(/safari/i)},isAndroid:function(){return-1===o.toLowerCase().indexOf("android")?e("body").hasClass("android"):!0},isTouch:function(){return"ontouchstart"in t&&"ontouchend"in document},getAndroidMajorVersion:function(){return this.isAndroid()?parseInt(o.slice(o.indexOf("Android")+8)):0},getAndroidMinorVersion:function(){return this.isAndroid()?parseInt(o.slice(o.indexOf("Android")+10)):0},isFullscreen:function(){return!!o.standalone},forceUA:function(e){o=e||t.navigator.userAgent},escapeHtml:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},load:function(t,e){if(-1!==this.loadedScripts.indexOf(t))return e&&e.call(),!1;var n,o=document.getElementsByTagName("body")[0];return o&&(n=document.createElement("script"),n.src=t,this.loadedScripts.push(t),"function"==typeof e&&(n.onload=function(){e()}),o.appendChild(n)),!0},"goto":function(e){if(e)try{t.top.location.href=e}catch(n){t.location.href=e}},openUrl:function(t){n||(n=document.createElement("iframe"),n.style.width="0",n.style.height="0",n.style.display="none",n.className="sprotocol",e("body").append(n)),n.src=t},parseParams:function(t,e,n){for(var o in e)"undefined"!=typeof t[o]&&(e[o]=-1!==n.indexOf(o)?this.evalBoolean(t[o]):t[o]);return e},evalBoolean:function(t){function e(t){return t=t.toLowerCase(),"yes"===t||"on"===t||"1"===t||"true"===t}function n(t){return t=t.toLowerCase(),"no"===t||"off"===t||"0"===t||"false"===t}if(t===!1||t===!0)return t;if("string"==typeof t){if(e(t))return!0;if(n(t))return!1}return!!t},scrollTop:function(){setTimeout(function(){t.scrollTo(0,1)},0)},compareVersions:function(t,e){var n=t?t.split("."):"0",o=e?e.split("."):"0",r=100*(0|n[0])+100*("0."+(0|n[1]))+10*("0."+(0|n[2])),i=100*(0|o[0])+100*("0."+(0|o[1]))+10*("0."+(0|o[2]));return r>i?1:r==i?0:-1},debug:function(t){"undefined"!=typeof jecho&&jecho.log(t)},debugDimensions:function(){this.debug("Screen: "+screen.width+" x "+screen.height),this.debug("Screen Av.: "+screen.availWidth+" x "+screen.availHeight),this.debug("Window (Zepto): "+e(t).width()+" x "+e(t).height()),this.debug("Inner: "+t.innerWidth+" x "+t.innerHeight),this.debug("Outer: "+t.outerWidth+" x "+t.outerHeight),this.debug("Client: "+document.documentElement.clientWidth+" x "+document.documentElement.clientHeight)}}}(this,Zepto),Sponsorpay.MBE.Utils.Spinner=function(){"use strict";function t(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function e(s,p,c){var u=p||"body";"undefined"==typeof s&&(s=!o),o!==s&&(clearTimeout(n),null===r&&(i.text(a).insertAfter(document.styleSheets[document.styleSheets.length-1].ownerNode),r=$('<div id="spnr-overlay"/>'),$('<div id="spnr-wrap"><div id="spnr"/></div>').appendTo(r),t()?r.find("#spnr").addClass("with-svg"):r.find("#spnr").html("<img src='/assets/mbe/spinner.gif?v=7'/>"),r.on("click touchend",function(){return!1})),r.appendTo(u),r.css({position:"body"!=u?"absolute":"fixed"}),r[s?"show":"hide"](),s&&(0|c)>0&&(n=setTimeout(function(){e(!1)},c)),o=s)}var n,o=!1,r=null,i=$("<style id='spinner-injected-css' type='text/css' />"),a="";return a='#spnr-overlay {  display: none;  width: 100%;  height: 100%;  top: 0px;  background-color: gray;  left: 0px;  opacity: 0.8;  z-index: 9999998;}#spnr-wrap {  display:-webkit-box;  -webkit-box-pack:center;  -webkit-box-align:center;  display:box;  box-pack:center;  box-align:center;  width: 100%;  height: 100%;}@keyframes "rotate" { from { -webkit-transform: rotate(0deg); transform: rotate(0deg); } to { -webkit-transform: rotate(360deg); transform: rotate(360deg); }}@-webkit-keyframes "rotate" { from { -webkit-transform: rotate(0deg); transform: rotate(0deg); } to { -webkit-transform: rotate(360deg); transform: rotate(360deg); }}#spnr {  z-index:9999999;  width: 60px;  height: 60px;}#spnr.with-svg {  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xIFRpbnkvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEtdGlueS5kdGQiPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGJhc2VQcm9maWxlPSJ0aW55IiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayINCgkgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIxMjhweCIgaGVpZ2h0PSIxMjhweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGcgaWQ9Il94MzFfNngxNl9TcGlubmVyLnBzZCIgZGlzcGxheT0ibm9uZSI+DQoJPGltYWdlIGRpc3BsYXk9ImlubGluZSIgd2lkdGg9IjEyOSIgaGVpZ2h0PSIxMjkiIHhsaW5rOmhyZWY9IkYyN0U3NUNERTBDOUUwNjYucG5nIiAgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgMSAtMC41IC0wLjUpIj4NCgk8L2ltYWdlPg0KPC9nPg0KPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzYzNjM2IiBzdHJva2Utd2lkdGg9IjEyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjY0LjAwMSIgeTE9IjguMTI1IiB4Mj0iNjQuMDAxIiB5Mj0iMjcuNzYyIi8+DQo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiM0ODQ4NDgiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMzYuMDYyIiB5MT0iMTUuNjExIiB4Mj0iNDUuODgiIHkyPSIzMi42MTgiLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzVBNUE1QSIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNS42MTEiIHkxPSIzNi4wNjIiIHgyPSIzMi42MTgiIHkyPSI0NS44ODIiLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZDNkM2QyIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSI4LjEyNiIgeTE9IjY0IiB4Mj0iMjcuNzY0IiB5Mj0iNjQiLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzdFN0U3RSIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNS42MTIiIHkxPSI5MS45MzgiIHgyPSIzMi42MTkiIHkyPSI4Mi4xMTciLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkwOTA5MCIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIzNi4wNjQiIHkxPSIxMTIuMzg5IiB4Mj0iNDUuODgzIiB5Mj0iOTUuMzgxIi8+DQo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNBMkEyQTIiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iNjQuMDAxIiB5MT0iMTE5Ljg3MyIgeDI9IjY0LjAwMSIgeTI9IjEwMC4yMzciLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0I0QjRCNCIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSI5MS45MzkiIHkxPSIxMTIuMzg3IiB4Mj0iODIuMTIxIiB5Mj0iOTUuMzgxIi8+DQo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNDNkM2QzYiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTEyLjM5MSIgeTE9IjkxLjkzNSIgeDI9Ijk1LjM4NiIgeTI9IjgyLjExNiIvPg0KPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjExOS44NzUiIHkxPSI2My45OTciIHgyPSIxMDAuMjQxIiB5Mj0iNjMuOTk4Ii8+DQo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMxMjEyMTIiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTEyLjM4OSIgeTE9IjM2LjA2IiB4Mj0iOTUuMzg0IiB5Mj0iNDUuODc3Ii8+DQo8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMyNDI0MjQiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iOTEuOTM3IiB5MT0iMTUuNjA5IiB4Mj0iODIuMTE4IiB5Mj0iMzIuNjE0Ii8+DQo8L3N2Zz4NCg==);  background-repeat: no-repeat;  background-size: contain;  -webkit-animation:rotate 0.6s infinite steps(12);  animation:rotate 0.6s infinite steps(12);  opacity: .5;}',{toggle:e}}(this,Zepto),Sponsorpay.MBE.Utils.Dialog=function(t){"use strict";var e=!1;return{confirm:function(n,o,r,i){if(!e){e=!0;var a=t.confirm(n);e=!1,i&&i(a)}},setDriver:function(t){driver=t}}}(this,Zepto),Sponsorpay.MBE.Utils.l10n=function(){"use strict";var t={};return{define:function(e){t=e},get:function(e){return t[e]?t[e]:e}}}(this),Sponsorpay.MBE.Failures={render:function(t){return{failure:!0,custom_campaign:{scenes:[{type:"generic embed",attributes:{content:"&lt;script&gt;"+Sponsorpay.MBE.Utils.escapeHtml(this.pages[t])+"&lt;/script&gt;"}}]}}},pages:{"default":"      var l10n = Sponsorpay.MBE.Utils.l10n.get;      MBE.showPage('failure', {                     content: {                       description: l10n(\"We're sorry, but something went wrong. We've been notified about this issue and we'll take a look at it shortly.\")                     }                   });",noOffers:"      var l10n = Sponsorpay.MBE.Utils.l10n.get;      Sponsorpay.MBE.Tracker.track('OFFERS_EMPTY');      MBE.showPage('failure', {                     content: {                       description: l10n('No offers available')                     }                   });",notAvailable:"      var l10n = Sponsorpay.MBE.Utils.l10n.get;      MBE.showPage('failure', {                     content: {                       description: l10n(\"The offer you've selected is no longer available.\")                     }                   });",noOffersPVQ:"      var l10n = Sponsorpay.MBE.Utils.l10n.get;      Sponsorpay.MBE.Tracker.plot('WARNING_PREVALIDATION_NO_NEXT_OFFER');      Sponsorpay.MBE.Tracker.plot('OFFER_ENGAGEMENT_0_ABORT');      Sponsorpay.MBE.Tracker.plot = function() {};      MBE.topbarText(l10n('Earn') + ' ' + MBE.getEnv('virtualCurrency'));      var page = MBE.showPage('banner', {        content: {          title: l10n('Sorry, this offer does not match your profile, please try again later.'),          buttonLabel: 'Close'        }      });      page.on('activate', function() {        $('.action-button').addClass('active')                           .on(Sponsorpay.MBE.Utils.isTouch() ? 'touchend' : 'click', function() {                              Sponsorpay.MBE.SDKInterface.notify('start', 'CLOSE_ABORTED');                           });        setTimeout(function() { $('.x-close').remove(); }, 100);        if (!MBE.isSDK()) { $('.action-button').remove(); }      });"}},Sponsorpay.MBE.EventEmitter=function(){this.events={},this.TOBEvents=[]},Sponsorpay.MBE.EventEmitter.prototype.bind=function(t,e){"string"==typeof t&&("object"!=typeof this.events[t]&&(this.events[t]=[]),"function"==typeof e&&this.events[t].push(e),-1!==this.TOBEvents.indexOf(t)&&this.trigger(t,null,!0))},Sponsorpay.MBE.EventEmitter.prototype.on=function(t,e){return this.bind(t,e)},Sponsorpay.MBE.EventEmitter.prototype.triggerOnBind=function(t){this.TOBEvents.push(t)},Sponsorpay.MBE.EventEmitter.prototype.trigger=function(t,e,n){if("string"==typeof t&&"object"==typeof this.events[t])for(var o=0,r=this.events[t].length;r>o;o++)"function"==typeof this.events[t][o]&&(this.events[t][o].call(this,e),n&&(this.events[t][o]="removed"))},Sponsorpay.MBE.SDKInterface=function(t,e){"use strict";function n(t,e){var n=[];for(var o in e)n.push(o+"="+e[o]);var r="sponsorpay://"+t+"?"+n.join("&");Sponsorpay.MBE.Utils.openUrl(r)}var o={offers:null,notify:function(t,e){"string"==typeof e&&(e={status:e});var o=Sponsorpay.MBE.Extensions;if(o.MRAID.isEnabled()){if("start"==t)switch(e.status){case"STARTED":o.MRAID.execute("start");break;case"CLOSE_FINISHED":o.MRAID.execute(o.MRAID.isExtended()?"finish":"close");break;case"CLOSE_ABORTED":o.MRAID.execute("close");break;case"USER_ENGAGED":o.MRAID.execute("credit")}}else Sponsorpay.MBE.API.isSDK()&&("validate"==t||"play"==t?this.trigger(t,e):n(t,e))},do_validate:function(t,e){return n("validate",{tpn:t,id:e}),1},do_play:function(t,e,o,r,i){var a={tpn:t,id:encodeURIComponent(e)};return"boolean"==typeof o&&(a.showAlert=o),"string"==typeof r&&(a.alertMessage=encodeURIComponent(r)),"string"==typeof i&&(a.clickThroughUrl=encodeURIComponent(i)),n("play",a),1},do_requestOffers:function(){this.offers?this.notify("requestOffers",{n:this.offers.length||0}):Sponsorpay.MBE.Tracker.plot("MBE_INVALID_RESPONSE")},do_getOffer:function(t){return t=t||0,this.offers&&this.offers[t]?JSON.stringify({id:this.offers[t].get("id"),uses_tpn:this.offers[t].get("uses_tpn")}):null},do_start:function(){return Sponsorpay.MBE.IndexController&&Sponsorpay.MBE.IndexController.openOffer(),1}};return e.extend(o,new Sponsorpay.MBE.EventEmitter),o}(this,Zepto),Sponsorpay.MBE.Dispatcher=function(t,e){function n(t,e){setTimeout(function(){o.api[t].apply(o.api,e)},o.nextIn),o.nextIn=0}var o=this;this.api=t,this.nextIn=0;for(var r=0;r<e.length;r++)this[e[r]]=function(t){return function(){return n(t,arguments),o}}(e[r])},Sponsorpay.MBE.API=function(t,e){"use strict";function n(t){return t=t.toUpperCase(),"undefined"!=typeof Sponsorpay.MBE["VideoAdapter_"+t]?new Sponsorpay.MBE["VideoAdapter_"+t]:new Sponsorpay.MBE.VideoAdapter_DUMMY}function o(t){return t=t.toUpperCase(),"undefined"!=typeof Sponsorpay.MBE["PageAdapter_"+t]?new Sponsorpay.MBE["PageAdapter_"+t]:null}function r(t,e){Sponsorpay.MBE.RemoteCallbackManager.execute(t,function(t,n){t&&Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_CALLBACK_ERROR"),"function"==typeof e&&e.call(null,t,n)})}var i,a={},s=[],p=["integration","isCompleted","isBrowser","appName","uniqid","virtualCurrency","pageThemeLocation","pageThemeHostname"],c={setEnv:function(t,e){if("string"==typeof t)return void(a[t]=e);for(var n in t)a[n]=t[n]},getEnv:function(t,e){return t?"undefined"==typeof a[t]?e:a[t]:a},resetEnv:function(){a={}},getEnvValidKeys:function(){return p},varSet:function(t,e){var n=this.getEnv("__stagedata",{});return"undefined"==typeof e?delete n[t]:n[t]=e,this.setEnv("__stagedata",n),e},varGet:function(t,e){var n=this.getEnv("__stagedata",{});return t in n?n[t]:"undefined"!=typeof e?e:null},varReset:function(){this.setEnv("__stagedata",{})},spinner:function(t,e,n){Sponsorpay.MBE.Utils.Spinner.toggle(t,e,n)},isBrowser:function(){return!!this.getEnv("isBrowser")},isSDK:function(){return!this.isBrowser()&&!this.isMRAID()},isMRAID:function(){return Sponsorpay.MBE.Extensions.MRAID.isEnabled()},hasFeature:function(t){var e=this.getEnv("sdkFeatures");return!!e&&-1!==e.toUpperCase().split(",").map(function(t){return t.trim()}).indexOf(t.toUpperCase())},supportsInstall:function(){return this.hasFeature("INS")},supportsNativePlayer:function(){return this.hasFeature("VPL")},userCanClose:function(){return!this.isBrowser()||this.isMRAID()},showCloseButton:function(){Sponsorpay.MBE.Stage.toggleCloseButton(!0)},hideCloseButton:function(){Sponsorpay.MBE.Stage.toggleCloseButton(!1)},openOffer:function(t){Sponsorpay.MBE.IndexController.openOffer(t)},getCurrentOffer:function(){return Sponsorpay.MBE.IndexController.getCurrentOffer()},rewardAndGo:function(t){return this.end(!1),this.go(t)},reward:function(){this.end(!1)},go:function(t){var e=this;if(s.forEach(function(t){e.cancelRepeat(t)}),s.length=0,"undefined"!=typeof t){if(t=parseInt(t,10),isNaN(t)||0>t||t>Sponsorpay.MBE.Stage.scenes.length||t==Sponsorpay.MBE.Stage.scenes.currentIndex+1)return!1;t-=1}return Sponsorpay.MBE.Stage.nextScene(t)},on:function(t,e){"activate"==t&&e.call()},showVideo:function(e,o,r){if(!e)return n("dummy");r=r||{},"string"==typeof o?r.url=o:r=o;var i=n(e);return i.setParams(r),t.setTimeout(function(){Sponsorpay.MBE.Stage.show(i)},0),i},showPage:function(t,e){if(!t)return o("dummy");e=e||{},"string"==typeof e&&(e={htmlId:e});var n=o(t);return n||(e={htmlId:t},n=o("html")),n.setParams(e),Sponsorpay.MBE.Stage.show(n),n},topbarText:function(t){return Sponsorpay.MBE.Stage.setTopbarText(t)},payout:function(t){r("payout",e.proxy(function(e){e||this.setUserRewarded(),"function"==typeof t&&t.call(null,e)},this))},setUserRewarded:function(){Sponsorpay.MBE.Stage.setRewarded(!0),this.engagementNotified||(Sponsorpay.MBE.SDKInterface.notify("start","USER_ENGAGED"),this.engagementNotified=!0)},isUserRewarded:function(){return Sponsorpay.MBE.Stage.isRewarded()},convert:function(t){r("convert",e.proxy(function(e,n){e||n&&n.pp&&this.setUserRewarded(),"function"==typeof t&&t.call(null,e)},this))},finish:function(t){Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_FINISH",null,e.proxy(function(){this.markAsCompleted(e.proxy(function(){return"string"==typeof t?void this.follow(t):void setTimeout(function(){Sponsorpay.MBE.SDKInterface.notify("start","CLOSE_FINISHED")},100)},this))},this))},markAsCompleted:function(t){return this.getEnv("isCompleted")?void(t&&t.call()):(this.setEnv("isCompleted",!0),void Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_COMPLETED",null,t))},abort:function(){setTimeout(function(){Sponsorpay.MBE.SDKInterface.notify("start","CLOSE_ABORTED")},100)},follow:function(t){setTimeout(e.proxy(function(){this.isMRAID()?Sponsorpay.MBE.Extensions.MRAID.execute("open",t):Sponsorpay.MBE.Utils.goto(this.isBrowser()?t:"sponsorpay://exit?url="+encodeURIComponent(t))},this),100)},end:function(t){Sponsorpay.MBE.RemoteCallbackManager.execute("convert",e.proxy(function(e){return e&&Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_CALLBACK_ERROR"),Sponsorpay.MBE.Stage.setRewarded(!0),Sponsorpay.MBE.SDKInterface.notify("start","USER_ENGAGED"),t!==!1?"string"==typeof t?void setTimeout(function(){Sponsorpay.MBE.Utils.goto(t)},200):void Sponsorpay.MBE.SDKInterface.notify("start","CLOSE_FINISHED"):void 0},this))},loadJS:function(t,e){Sponsorpay.MBE.Utils.load(t,function(){"function"==typeof e&&e.call()})},track:function(t,e,n){"custom"!==t&&(t="OFFER_ENGAGEMENT_[[step]]_"+t),Sponsorpay.MBE.Tracker.plot(t,e,function(){"function"==typeof n&&n.call()})},delay:function(t,e){var n=this;return t=parseInt(t,10),(isNaN(t)||0>=t)&&(t=1),i.nextIn=t,"function"==typeof e&&setTimeout(function(){e.apply(n,arguments)},t-1),i},repeat:function(e,n,o){function r(){return o&&c===o?void u.cancelRepeat(p):((new Date).getTime()-a>=n&&(e.call(),c++,a=(new Date).getTime()),void(p.value=i(r)))}var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame;if(!i)throw"Cannot repeat: requestAnimationFrame not supported.";var a=(new Date).getTime(),p={},c=0,u=this;return s.push(p),p.value=i(r),p},cancelRepeat:function(e){var n=t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame;if(!n)throw"Cannot cancel: cancelAnimationFrame not supported.";n(e.value)},cookie:function(t,e){function n(t,e){var n=new Date;n.setDate(n.getDate()+14);var e=t+"="+String(e)+";expires="+n.toUTCString()+";path=/;";document.cookie=e}function o(t){for(var e,n=document.cookie.split("; "),o=0;e=n[o]&&n[o].split("=");o++)if(e[0]===t)return e[1]||""}return"undefined"==typeof e?o(t):null===e?void n(t,"",-1):void n(t,e)}};return i=new Sponsorpay.MBE.Dispatcher(c,["track","loadJS","follow","finish","payout","convert","topbarText","go"]),c}(this,Zepto),Sponsorpay.MBE.Tracker=function(t){function e(){return{plotPixel:"mbe.gif",host:"//engine.sponsorpay.com/",timerStartedAt:0,setPlotPixel:function(t){this.plotPixel=t},getPlotPixel:function(){return this.plotPixel},setHost:function(t){this.host=t},getHost:function(){return this.host},startTimer:function(){this.timerStartedAt=(new Date).getTime()},resetTimer:function(){this.timerStartedAt=0},plot:function(t,e,n){this._getPixel(t,this.plotPixel,e,n)},track:function(t,e,n){this._getPixel(t,"ofw.gif",e,n)},_getPixel:function(t,e,n,o){function r(){s||(s=!0,o.call())}var i=this,a={userid:n.userid||"",appid:n.appid||"",country:n.country?n.country.toUpperCase():"",language:n.language?n.language.toUpperCase():"",integration:"",tracking:"undefined"!=typeof n.tracking?n.tracking:6,platform:n.platform,client:n.client,offers:{ids:n.lpid&&n.lpid.id||"",providerType:n.lpid&&n.lpid.providerType,page:1}};if(o&&"function"==typeof o){var s=!1,p=new Image;p.onload=r,p.src=i._buildPixelUrl(a,e,t),setTimeout(r,500)}else setTimeout(function(t,e,n){return function(){var o=new Image;o.src=i._buildPixelUrl(t,e,n)}}(a,e,t),0)},_buildPixelUrl:function(e,n,o){var r=t.location.protocol+this.host+n+"?ts="+Math.round((new Date).getTime()/1e3),i=encodeURIComponent;return r+="&u="+i(e.userid)+"&a="+i(e.appid)+"&c="+i(e.country)+"&l="+i(e.language)+"&o="+i(e.offers.ids)+"&p="+i(e.offers.page)+"&m="+i(o)+"&i="+i(e.tracking)+"&feature_id="+("video.fyber.com"===t.location.host?"3":"2")+"&platform="+i(e.platform)+"&client="+i(e.client)+"&ad_format=video&rewarded=1&s="+(0===this.timerStartedAt?"0":(((new Date).getTime()-this.timerStartedAt)/1e3).toFixed(2)),e.offers.providerType&&(r+="&pt="+i(e.offers.providerType)),r}}}var n=null,o=e(),r={setTracker:function(t){o=t||e()},getTracker:function(){return o},setHost:function(t){o.setHost(t)},getHost:function(){return o.getHost()},setData:function(t){n=t},updateData:function(t,e){n[t]=e},getData:function(){return n},startTimer:function(){o.startTimer()},track:function(t,e){return!n||n.deeplink?void("function"==typeof e&&e.call()):(Sponsorpay.MBE.IndexController&&(n.lpid=Sponsorpay.MBE.IndexController.getLPID()),void o.track(t,n,e))},plot:function(t,e,r){function i(){"function"==typeof r&&(r.call(),r=null)}if("custom"!==t.toLowerCase()||"string"!=typeof e){if(!n)return void i();t=t.replace(/\[\[step\]\]/i,Sponsorpay.MBE.Stage.step),Sponsorpay.MBE.IndexController&&(n.lpid=Sponsorpay.MBE.IndexController.getLPID()),o.plot(t,n,r)}else if(/\.(gif|jpg|jpeg|tiff|png)$/i.test(e)){var a=new Image;a.src=e,i()}else{var s;s=document.createElement("iframe"),s.style.width="0",s.style.height="0",s.style.display="none",s.className="sptracker",s.dataset.trackTimeout=setTimeout(function(){Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_BACKGROUND_TRACK_TIMEOUT"),i()},8e3),s.onload=function(t){clearTimeout(t.target.dataset.trackTimeout),i()},s.src=e,setTimeout(function(){document.body.appendChild(s)},0)}}};return r}(this),Sponsorpay.MBE.Models={},Sponsorpay.MBE.Models.Params=function(t){this.attributes=$.extend(!0,{},t||{})},Sponsorpay.MBE.Models.Params.prototype.get=function(t){return this.attributes[t]},Sponsorpay.MBE.Models.Setup=function(t){this.attributes=$.extend(!0,{},t||{})},Sponsorpay.MBE.Models.Setup.prototype.get=function(t){return this.attributes[t]},Sponsorpay.MBE.Models.Setup.prototype.fetch=function(t){if(Object.keys(this.attributes).length>0)return void("function"==typeof t.success&&t.success.call(void 0,this.attributes));var e=t.url+window.location.search+"&client=sdk&feature_id="+("video.fyber.com"===window.location.host?"3":"2");$.ajax({url:e,dataType:"json",timeout:1e4,xhrFields:{withCredentials:!0},context:this,success:function(e){this.attributes=e,"function"==typeof t.success&&t.success.call(void 0,e)},error:function(e,n,o){"function"==typeof t.error&&t.error.call(void 0,e,n,o)}})},Sponsorpay.MBE.Models.Offer=function(t){this.attributes=$.extend(!0,{},t||{}),this.attributes.engagement=null},Sponsorpay.MBE.Models.Offer.prototype.get=function(t){return this.attributes[t]},Sponsorpay.MBE.Models.Offer.prototype.setEngagement=function(t){t instanceof Sponsorpay.MBE.Models.Engagement&&(this.attributes.engagement=t)},Sponsorpay.MBE.Models.Offer.prototype.clone=function(){var t=new Sponsorpay.MBE.Models.Offer(this.attributes);return this.attributes.engagement&&t.setEngagement(this.attributes.engagement.clone()),t},Sponsorpay.MBE.Models.Engagement=function(t){this.attributes=$.extend(!0,{},t||{})},Sponsorpay.MBE.Models.Engagement.prototype.clone=function(){return new Sponsorpay.MBE.Models.Engagement(this.attributes)},Sponsorpay.MBE.Models.Engagement.prototype.fetch=function(t){return Object.keys(this.attributes).length>0?void("function"==typeof t.success&&t.success.call(void 0,this.attributes)):void $.ajax({url:t.url,dataType:"json",timeout:1e4,xhrFields:{withCredentials:!0},context:this,success:function(e){this.attributes=e,"function"==typeof t.success&&t.success.call(void 0,e)},error:function(e,n,o){"function"==typeof t.error&&t.error.call(void 0,e,n,o)}})},Sponsorpay.MBE.Models.Engagement.prototype.get=function(t){return this.attributes[t]},Sponsorpay.MBE.Models.Engagement.prototype.hasBackgroundTracking=function(){return!!this.get("proceed_background_tracking_url")},Sponsorpay.MBE.Models.Engagement.prototype.backgroundTrack=function(){this.hasBackgroundTracking()&&$.ajax({url:this.get("proceed_background_tracking_url")+"?subid="+this.get("subid"),error:function(t,e){Sponsorpay.MBE.API.track("BGTRACKING_ERROR_"+e.toUpperCase())}})},Sponsorpay.MBE.Models.Engagement.prototype.urlForAppleStore=function(){return"https://itunes.apple.com/"+this.get("country_code")+"/app/id"+this.get("mobile_app_identifier")},Sponsorpay.MBE.Models.Engagement.prototype.urlForInstall=function(){return"sponsorpay://install?id="+this.get("mobile_app_identifier")+"&country="+this.get("country_code")},Sponsorpay.MBE.IndexController=function(t,e){function n(t){v=!0,"get_out"===t&&(MBE.track("PREVALIDATION_EXIT"),"undefined"!=typeof y[0]&&(e.get(h.get("user_responses_path"),{ad_id:y[0].get("id"),response_id:0}),y.shift()),o())}function o(){function t(){m?(m=!1,l.track(y.length>0&&y[0].get("is_trackable")?"OFFERS_OK":"OFFERS_EMPTY",function(){MBE.isBrowser()?i():d.do_requestOffers()})):i()}if(0==y.length)return void t();var e=new Sponsorpay.MBE.NetworkValidator;e.bind("success",function(){t()}),e.bind("failure",function(){y.shift(),o()}),e.perform(y[0])}function r(){return"undefined"!=typeof y[0]?y[0].clone():null}function i(t){return"string"==typeof t?(y.length=0,y[0]=new Sponsorpay.MBE.Models.Offer({}),void a(t)):void a(y.length>0?y[0].get("url"):f.render(v?"noOffersPVQ":g?"notAvailable":"noOffers"))}function a(t){function e(t){!t||t instanceof Sponsorpay.MBE.Models.Engagement||(t=new Sponsorpay.MBE.Models.Engagement(t)),t&&!t.get("failure")&&(y[0]&&y[0].setEngagement(t),Sponsorpay.MBE.RemoteCallbackManager.setData({type:t.get("callback_video_play_to_end"),url_cb:t.get("proceed_callback_web_url"),url_pp:t.get("proceed_publisher_callback_web_url"),subid:t.get("subid"),controlNumbers:t.get("control_numbers"),lpid:t.get("id")}),l.updateData("country",t.get("country_code"))),Sponsorpay.MBE.Stage.on("ready",function(){MBE.varSet("scene_data",h.get("scene_data")),Sponsorpay.MBE.Stage.render(t?t.get("custom_campaign"):"",h.get("scene_index")),t&&!t.get("failure")&&(l.plot("MBE_STARTED",null,function(){l.startTimer()}),d.notify("start",{status:"STARTED"})),u.Spinner.toggle(!1)}),Sponsorpay.MBE.Stage.init("stage"),t&&!t.get("failure")&&"mobile_deeplink"==h.get("current_integration")&&l.track("OFFERS_OK")}var n;u.Spinner.toggle(!0),"string"==typeof t?(n=new Sponsorpay.MBE.Models.Engagement,n.fetch({url:t,success:function(){e(n)},error:function(t,n){MBE.track("FAILURE_FETCHING_OFFER_"+n.toUpperCase()),e(f.render("default"))}})):e(t)}function s(e){for(var n,o=/\+/g,r=/([^&=]+)=?([^&]*)/g,i={},a=function(t){return decodeURIComponent(t.replace(o," "))},e=e||t.location.search.substring(1);n=r.exec(e);)i[a(n[1])]=a(n[2]);return i}function p(){if(g)return{id:c.get("ad_id"),providerType:"Fyber"};var t=d.offers,e={id:""};return"undefined"!=typeof t&&null!==t&&t.length>0&&t[0].get("is_trackable")&&(e.id=t[0].get("id"),e.providerType=t[0].get("provider_type")),e}var c=new Sponsorpay.MBE.Models.Params(s());t.MBE=Sponsorpay.MBE.API;var u=Sponsorpay.MBE.Utils,l=Sponsorpay.MBE.Tracker,d=Sponsorpay.MBE.SDKInterface,f=Sponsorpay.MBE.Failures,h=null,y=[],g=null,m=!0,v=!1,E=null,S=navigator.language||"en",M=S.split("-")[0].toLocaleLowerCase();return t.name="MBE Application",{init:function(t,n){function o(){m=!0,v=!1,MBE.setEnv({appName:h.get("application_name"),uniqid:h.get("user_uniqid"),isBrowser:"sdk"!==c.get("client"),sdkFeatures:c.get("sdk_features"),sdkVersion:c.get("sdk_version"),autoplayVideo:"off"!==c.get("autoplay_video"),playsInline:"on"===c.get("plays_inline"),virtualCurrency:h.get("virtual_currency")}),h.get("offers").forEach(function(t){y.push(new Sponsorpay.MBE.Models.Offer(t))}),d.offers=y,h.get("tracking_host")&&Sponsorpay.MBE.Tracker.setHost(h.get("tracking_host")),l.setData({appid:c.get("appid"),userid:c.get("uid"),country:h.get("country_code"),language:h.get("main_language"),tracking:h.get("current_tracking_id"),platform:h.get("platform")||c.get("platform"),client:h.get("client")||c.get("client"),lpid:p(),deeplink:g}),n&&n.call()}function r(t,e){h=h||new Sponsorpay.MBE.Models.Setup,MBE.track("FAILURE_FETCHING_SETUP_"+e.toUpperCase()),a(f.render("default"))}if(""===t)return void r(null,"empty_endpoint");if(null==E&&this.setEnvironment(),c.get("impression_url")&&(g=c.get("impression_url")),("staging"==E||"testa"==E||"development"==E)&&l.setHost("//staging-engine.sponsorpay.com/"),g){var b=c.get("impression_url").split("?")[1];c=new Sponsorpay.MBE.Models.Params(s(b))}h=new Sponsorpay.MBE.Models.Setup("object"==typeof t?t:{}),l.setData({appid:c.get("appid"),userid:c.get("uid"),platform:c.get("platform"),client:c.get("client"),language:M,deeplink:!!g}),e.get("/"+S+"/locales.json",function(e){u.l10n.define(e),g?(MBE.setEnv({appName:c.get("appname"),uniqid:c.get("appid")+"_"+c.get("uid"),isBrowser:!0}),l.updateData("tracking","api"===c.get("client")?10:7),i(g)):h.fetch({url:"string"==typeof t?t:void 0,success:o,error:r})})},checkOffersAvailability:o,runEngagement:a,pvqHandler:n,openOffer:i,getLPID:p,getCurrentOffer:r,getEnvironment:function(){return E},setEnvironment:function(t){E=t?t:e("body").data("environment")||"development"}}}(this,Zepto),Sponsorpay.MBE.Extensions=Sponsorpay.MBE.Extensions||{},Sponsorpay.MBE.Extensions.VAST=function(){"use strict";var t={},e={VASTClient:"undefined"!=typeof SPDMVAST?SPDMVAST.client:null,fetchTag:function(e){var n=e.replace(/&amp;/g,"&"),o=n.split(/\?/)[0];if(t[o])return void this.trigger("data",t[o]);if(!this.VASTClient)return void this.trigger("failure",e);var r=this;this.VASTClient.get(n,function(n){if(!n)return void r.trigger("error",e);for(var i,a,s,p=!1,c=0;c<n.ads.length;c++){i=n.ads[c];for(var u=0;u<i.creatives.length;u++)if(a=i.creatives[u],"linear"==a.type)for(var l=0;l<a.mediaFiles.length;l++)if(s=a.mediaFiles[l],"video/mp4"==s.mimeType){p=!0,s.tracking={},s.clickThrough={},"string"==typeof a.videoClickThroughURLTemplate&&(s.clickThrough.url=a.videoClickThroughURLTemplate.trim()),"string"==typeof a.videoClickTrackingURLTemplate&&(s.clickThrough.trackingUrl=a.videoClickTrackingURLTemplate.trim()),s.wrapperTracks=n.wrapperTracks,["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete"].forEach(function(t){s.tracking[t]=[],a.trackingEvents[t]&&(s.tracking[t]=a.trackingEvents[t].filter(function(t){return""!=t.trim()}))}),i.impressionURLTemplates&&(s.tracking.impression=i.impressionURLTemplates.filter(function(t){return""!=t.trim()}));break}}p?(t[o]=s,r.trigger("data",s)):r.trigger("failure",e)})}};return $.extend(e,new Sponsorpay.MBE.EventEmitter),e}(),Sponsorpay.MBE.NetworkValidator=function(){$.extend(this,new Sponsorpay.MBE.EventEmitter),this.timeout=5e3},Sponsorpay.MBE.NetworkValidator.prototype.perform=function(t){function e(e,n){o++,e&&r++,o==t.get("validators").length&&(r!=o&&Sponsorpay.MBE.Tracker.plot(n),a.trigger(r==o?"success":"failure"))
}if(!t||!t.get("validators")||0==t.get("validators").length)return void this.trigger("success");var n,o=0,r=0,i={},a=this;t.get("validators").forEach(function(o){for(var r in o)switch(r.split("_")[0]){case"always a success":a.trigger("success");break;case"always a failure":a.trigger("failure");break;case"mediator":var s=r.replace("mediator_",""),p=s.toUpperCase();Sponsorpay.MBE.Tracker.plot("TPN_VALIDATE_"+p+"_START"),i[p]=setTimeout(function(){i[p]=null,Sponsorpay.MBE.Tracker.plot("TPN_VALIDATE_"+p+"_TIMEOUT_SDK"),e(!1,"WARNING_"+p+"_EMPTY")},a.timeout),Sponsorpay.MBE.SDKInterface.do_validate(s,t.get("id")),Sponsorpay.MBE.SDKInterface.on("validate",function(n){if(null!==i[p]&&n&&n.tpn.toLowerCase()==s&&n.id==t.get("id"))switch(clearTimeout(i[p]),n.result){case"success":return Sponsorpay.MBE.Tracker.plot("TPN_VALIDATE_"+p+"_SUCCESS"),void e(!0);case"no_video":return Sponsorpay.MBE.Tracker.plot("TPN_VALIDATE_"+p+"_NO_VIDEO"),void e(!1,"WARNING_"+p+"_EMPTY");default:Sponsorpay.MBE.Tracker.plot("TPN_VALIDATE_"+p+"_"+n.result.toUpperCase().replace(/\s/g,"_")),e(!1,"WARNING_"+p+"_EMPTY")}});break;case"hyprmx":n="hyprmxValidator_"+t.get("id"),window[n]=function(t){clearTimeout(i[n]),e(t,"WARNING_HYPRMX_EMPTY")},i[n]=setTimeout(function(){Sponsorpay.MBE.Tracker.plot("ERROR_HYPRMX"),a.trigger("failure")},a.timeout),$.ajax({url:o[r]+"&jsonp="+n,dataType:"jsonp"});break;case"vast":var c=Sponsorpay.MBE.Extensions.VAST;c.on("data",function(){e(!0)}),c.on("failure",function(){e(!1,"WARNING_VAST_EMPTY")}),c.on("error",function(){e(!1,"WARNING_VAST_EMPTY")}),c.fetchTag(o[r]);break;case"unruly carousel":Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.validate(o[r],function(t){e(t,"WARNING_UNRULY_CAROUSEL_EMPTY")});break;default:a.trigger("failure")}})},Sponsorpay.MBE.Extensions=Sponsorpay.MBE.Extensions||{},Sponsorpay.MBE.Extensions.MRAID=function(t,e){"use strict";var n,o,r=["open","close","expand","isViewable","useCustomClose"],i=["start","finish","credit"],a=!1,s=!1,p={isEnabled:function(){try{n=t.mraid||t.parent.mraid}catch(e){}return"undefined"!=typeof n},isExtended:function(){try{o=t.mraid_ext||t.parent.mraid_ext}catch(e){}return"undefined"!=typeof o},isReady:function(){return this.isEnabled()&&a===!0},execute:function(t,e){return this.isEnabled()?~r.indexOf(t)&&"function"==typeof n[t]?n[t](e):this.isExtended()&&~i.indexOf(t)&&"function"==typeof o[t]?o[t](e):void 0:void 0},init:function(){if(!s){var t=this;return this.isEnabled()?(this.on("ready",function(){a=!0,n.addEventListener("sizeChange",function(e,n){t.trigger("sizeChange",[e,n])}),n.addEventListener("stateChange",function(e){t.trigger("stateChange",e)}),n.addEventListener("viewableChange",function(e){t.trigger("viewableChange",e)})}),"loading"===n.getState()?n.addEventListener("ready",function(){a||(a=!0,t.trigger("ready"))}):(a=!0,t.trigger("ready")),s=!0,!0):!1}}};return e.extend(p,new Sponsorpay.MBE.EventEmitter),p.init()||setTimeout(function(){p.init()},100),p}(this,Zepto),Sponsorpay.MBE.ScenesCollection=function(){this.currentIndex=0},Sponsorpay.MBE.ScenesCollection.prototype=new Array,Sponsorpay.MBE.ScenesCollection.prototype.next=function(){return"undefined"==typeof this[this.currentIndex+1]?void 0:this[++this.currentIndex]},Sponsorpay.MBE.ScenesCollection.prototype.select=function(t){return"undefined"==typeof t?this[this.currentIndex]:"undefined"==typeof this[t]?void 0:(this.currentIndex=t,this[this.currentIndex])},Sponsorpay.MBE.Stage=function(t,e,n){"use strict";function o(){v.isAndroid()?(h=r()?screen.width:document.body.clientWidth,y=document.body.clientHeight):(h=d.width(),y=d.height())}function r(){return 2===v.getAndroidMajorVersion()}var i,a,s,p,c,u,l,d,f,h,y,g={appStore:'<span class="logo-appstore"></span>'},m=Sponsorpay.MBE.API,v=Sponsorpay.MBE.Utils,E=v.isAndroid()?1e3:0,S=!1,M=!1,b={step:0,scenes:null,init:function(r){function h(){b(),w.trigger("ready",null,!0)}function y(){g(),h()}function g(){!I.MRAID.initialized&&I.MRAID.isEnabled()&&(I.MRAID.initialized=!0,I.MRAID.execute("useCustomClose",!0),I.MRAID.on("viewableChange",function(t){("true"==t||t===!0)&&d.trigger("orientationchange.mbe")}))}function b(){switch(l.removeClass("portrait landscape").addClass(w.isPortrait()?"portrait":"landscape"),l.addClass(m.isBrowser()?"stand-alone":"not-stand-alone"),!0){case v.isIOS():l.addClass("os-ios"),e("#stage").css({"min-height":w.isPortrait()?screen.height:screen.width});break;case v.isAndroid():l.addClass("os-android"),e("#stage").css({"min-height":t.outerHeight/t.devicePixelRatio});break;default:l.addClass("os-unknown"),e("#stage").css({"min-height":t.innerHeight})}}if(a=e('<span class="x-close"/>'),s=e("<div class='topbar'>Sponsorpay</div>"),c=null,u=null,l=null,f=e("<div class='layover'/>"),S=!1,M=!1,this.step=0,this.scenes=new Sponsorpay.MBE.ScenesCollection,p=n,S)return void this.trigger("ready",null,!0);var B;try{B=0===Object.keys(t.parent).length}catch(A){B=!0}d=e(B?t:t.parent);var w=this,I=Sponsorpay.MBE.Extensions;i=e("#"+r),l=e("body"),S=!0,d.on("orientationchange.mbe",e.proxy(function(){setTimeout(e.proxy(function(){o(),this.positionLayover(),b(),this.fitContent(),this.scrollTop(),c&&"function"==typeof c.on_AfterRotation&&c.on_AfterRotation.call(c,u)},this),E)},this)),I.MRAID.isEnabled()?I.MRAID.isReady()?y():I.MRAID.on("ready",y):h()},render:function(t,n){return t&&e.isArray(t.scenes)?(t.question&&t.question.active&&this.scenes.push(this.compileScene(this.PVQ2SceneTemplateData(t.question))),t.scenes.forEach(e.proxy(function(t){this.scenes.push(this.compileScene(t))},this)),this.nextScene(n>>0===0?0:n-1),this.trigger("rendered"),!0):!1},PVQ2SceneTemplateData:function(t){var e=JSON.parse(JSON.stringify(t));return delete e.active,{type:"PVQ",attributes:{question:e},convert:!1,ht_custom:"",ht_type:"none",index:"0",name:"PVQ",reward:!1,scene_callbacks:[]}},scrollTop:function(){var t=this,e=m.isBrowser();"undefined"==typeof e?setTimeout(function(){t.scrollTop()},500):e&&!m.isMRAID()&&v.scrollTop()},compileScene:function(t){function o(){switch(t.ht_type){case"none":l[d++]='Sponsorpay.MBE.API.topbarText("");';break;case"custom":l[d++]='Sponsorpay.MBE.API.topbarText("'+s(t.ht_custom)+'");';break;case"default":}}function r(){switch(!0){case t.reward&&t.convert:l[d++]='video.on("finish", function() { Sponsorpay.MBE.API.payout(); Sponsorpay.MBE.API.convert(); if (!Sponsorpay.MBE.API.go()) { Sponsorpay.MBE.API.finish(); } });',l[d++]='video.on("close", function() { Sponsorpay.MBE.API.payout(); Sponsorpay.MBE.API.convert(); });';break;case t.reward&&!t.convert:l[d++]='video.on("finish", function() { Sponsorpay.MBE.API.payout(); if (!Sponsorpay.MBE.API.go()) { Sponsorpay.MBE.API.finish(); } });',l[d++]='video.on("close", function() { Sponsorpay.MBE.API.payout(); });';break;case!t.reward&&t.convert:l[d++]='video.on("finish", function() { Sponsorpay.MBE.API.convert(); if (!Sponsorpay.MBE.API.go()) { Sponsorpay.MBE.API.finish(); } });',l[d++]='video.on("close", function() { Sponsorpay.MBE.API.convert(); });';break;default:l[d++]='video.on("finish", function() { if (!Sponsorpay.MBE.API.go()) { Sponsorpay.MBE.API.finish(); } });'}}function i(){switch(!0){case t.reward&&t.convert:l[d++]='page.on("userAction", function(url) { Sponsorpay.MBE.API.convert(function() {  Sponsorpay.MBE.API.payout(function() { Sponsorpay.MBE.API.follow(url); }); }); });',l[d++]='page.on("close", function() { Sponsorpay.MBE.API.convert( function() { Sponsorpay.MBE.API.payout( function() { Sponsorpay.MBE.API.finish(); }); }); });';break;case t.reward&&!t.convert:l[d++]='page.on("userAction", function(url) { Sponsorpay.MBE.API.payout(function() { Sponsorpay.MBE.API.follow(url); }); });',l[d++]='page.on("close", function() { Sponsorpay.MBE.API.payout( function() { Sponsorpay.MBE.API.finish(); }); });';break;case!t.reward&&t.convert:l[d++]='page.on("userAction", function(url) { Sponsorpay.MBE.API.convert(function() { Sponsorpay.MBE.API.follow(url); }); });',l[d++]='page.on("close", function() { Sponsorpay.MBE.API.convert( function() { Sponsorpay.MBE.API.finish(); }); });';break;default:l[d++]='page.on("userAction", function(url) { Sponsorpay.MBE.API.follow(url); });',l[d++]='page.on("close", function() { Sponsorpay.MBE.API.finish(); });'}}function a(e){if(t.scene_callbacks&&0!=t.scene_callbacks.length){var n;t.scene_callbacks.forEach(function(t){(n=t.event.match(/progress\s(\d+)/))?(l[d++]=e+'.on("progress", function(quarter) {',l[d++]="  if (quarter=="+(n[1]-1)+") {",l[d++]='    Sponsorpay.MBE.API.track("custom", "'+t.url+'");',l[d++]="  }",l[d++]="});"):l[d++]=e+'.on("'+t.event+'", function() { Sponsorpay.MBE.API.track("custom", "'+t.url+'"); });'})}}function s(t){return f.text(t).html().replace(/\"/g,"&quot;")}function p(e,n){return t.attributes?(n=n||"",e=e.split("."),t.attributes[e[0]]&&"undefined"!=typeof t.attributes[e[0]][e[1]]?t.attributes[e[0]][e[1]]:n):n}var c,u,l=[],d=0,f=e("<div/>"),h=Sponsorpay.MBE.API.getEnv("autoplayVideo"),y=Sponsorpay.MBE.API.getEnv("playsInline");switch(h=h==n?!0:!!h,y=y==n?!1:!!y,t=t&&"object"==typeof t?t:{type:"unknown"},t.type=t.type||"unknown",t.type.toLowerCase()){case"generic embed":return t.attributes&&t.attributes.content?e("<div>").html(t.attributes.content).text():"";case"pvq":u={content:{title:p("question.text",""),getInText:p("question.get_in",""),getOutText:p("question.get_out","")},presentation:{bgPortrait:p("question.background_image_p"),bgLandscape:p("question.background_image_l")}},l[d++]='var page=Sponsorpay.MBE.API.showPage("pvq", '+JSON.stringify(u)+");";break;case"html5 video":c=t.attributes&&t.attributes.html5_video_url?t.attributes.html5_video_url:"";var g=t.attributes&&t.attributes.html5_video_is_vast?"vast":"html5";l[d++]='var video=Sponsorpay.MBE.API.showVideo("'+g+'", {inline: '+y+", autoplay: "+h+', controls: true, url: "'+c+'"});',a("video"),r();break;case"youtube":c=t.attributes&&t.attributes.url?t.attributes.url:"",l[d++]='var video=Sponsorpay.MBE.API.showVideo("youtube", {inline: '+y+", autoplay: "+h+', url: "'+c+'"});',a("video"),r();break;case"banner":u={content:{title:p("content.title",""),description:p("content.description",""),buttonLabel:p("content.buttonLabel",""),bannerUrl:p("content.bannerUrl","")},presentation:{bgPortrait:p("presentation.bgPortrait"),bgLandscape:p("presentation.bgLandscape"),buttonColor:p("presentation.buttonColor"),buttonLabelColor:p("presentation.buttonLabelColor")}},l[d++]='var page=Sponsorpay.MBE.API.showPage("banner", '+JSON.stringify(u)+");",a("page"),i()}return o(),"<script>"+l.join("\n")+"</script>"},nextScene:function(t){var o="undefined"==typeof t?this.scenes.next():this.scenes.select(t);return o?(p=n,s.removeClass("transparent"),i&&i.length>0&&i.empty(),e("#backstage").html(o),!0):!1},show:function(t){c=t,t.shown=!1,setTimeout(e.proxy(function(){this.empty(),this.insert(t,e.proxy(function(e){i.removeClass(function(t,e){for(var n=e.split(" "),t=0;t<n.length;t++)if(0===n[t].indexOf("adapter-type-"))return n[t];return""}).addClass("adapter-type-"+t.adapterType),m.userCanClose()&&(a.off("click.mbe"),a.appendTo(i),a.on("click.mbe",function(){"function"==typeof t.on_Close&&t.on_Close.call(t)}),this.toggleCloseButton(!0),t.trigger("topbar")),"function"==typeof t.on_AfterInsert&&t.on_AfterInsert.call(t,e),t.actions.activate.run(),t.shown=!0},this))},this),c instanceof Sponsorpay.MBE.VideoAdapter&&r()?500:0)},empty:function(){return i.empty(),this},insert:function(t,n){function r(r){u=e(r),u.attr("id")||u.attr("id","mbe-content-"+Math.ceil(100*Math.random())),s.html(p||t.getTopbarMessage()).css({height:"36px"}).addClass("translucent"),setTimeout(function(){o(),c.fitContent(),u||(u=e(r)),u.length>0&&u.css({display:"block"}).show(),i.empty().append(s).append(u).append(a()),t.params.useLayover&&(i.append(f),c.positionLayover()),"pvq"!=t.type&&c.step++,n.call(c,u)},E/2)}function a(){var e="";return t.hasAppStoreLogo()&&(e+=g.appStore),t.hasSponsorpayLogo()&&(e+=g.sponsorpay),e}var c=this;if(0!==i.length){var l=!1,d=setTimeout(function(){l=!0,n.call()},5e3);t.on("render",function(t){clearTimeout(d),l||r(t)});var h=t.render();null!==h&&(clearTimeout(d),l=!0,r(h))}},positionLayover:function(){var t={};t.right="0",r()?(t.top="250px",t.width="320px"):t.top=this.getAvailableHeight()-100,f.css(t),f.on("touchstart",function(t){return t.stopPropagation(),t.preventDefault(),!1})},fitContent:function(){switch(!0){case c instanceof Sponsorpay.MBE.VideoAdapter:if(null===u)return;var t,n=this.getAvailableHeight(),o=parseInt(s.css("height"),10),i=Math.round((n-o)/(n/h));i=c.adjustWidth(i),c.shown&&(u=e("#"+u.attr("id"))),r()?i=320:t=n-o,t=c.adjustHeight(t),u.css({top:o,left:Math.round((h-i)/2),position:"absolute",height:t,width:i});break;case c instanceof Sponsorpay.MBE.PageAdapter:}return this},setRewarded:function(t){M=t},isRewarded:function(){return M},getAvailableHeight:function(){var e;switch(!0){case v.isIOS():e=this.isPortrait()?d.height():screen.width;break;case v.isAndroid():e=t.outerHeight/t.devicePixelRatio;break;default:e=y}return navigator.userAgent.match(/GT-P5110/i)||navigator.userAgent.match(/GT-P7511/i)?e:v.isAndroid()&&e<h/t.devicePixelRatio&&this.isPortrait()?2*e:(v.isAndroid()&&!this.isPortrait()&&(e+=60),e)},getContainer:function(){return i},toggleCloseButton:function(t){a.toggleClass("mbe-hidden",!t)},isPortrait:function(){return v.isAndroid()?0===d.get(0).orientation||180===d.get(0).orientation:(o(),y>=h)},setTopbarText:function(t){return 0!=s.length?"undefined"==typeof t?s.get(0).innerHTML:(""===t&&(s.addClass("transparent"),t=" "),p=t,s.get(0).innerHTML=t):void 0}};return e.extend(b,new Sponsorpay.MBE.EventEmitter),e(function(){try{b.scrollTop()}catch(t){}}),b}(this,Zepto),window.matchMedia=window.matchMedia||function(t){"use strict";var e,n=t.documentElement,o=n.firstElementChild||n.firstChild,r=t.createElement("body"),i=t.createElement("div");return i.id="mq-test-1",i.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(i),function(t){return i.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,o),e=42===i.offsetWidth,n.removeChild(r),{matches:e,media:t}}}(document),Sponsorpay.MBE.RemoteCallback=function(t,e){this.alias=t,this.executed=!1,this.url=null,this.ajaxDriver=e,this.data=null},Sponsorpay.MBE.RemoteCallback.prototype.execute=function(t){var e=this;return null!==this.url&&null!==this.data&&this.ajaxDriver?this.executed?void("function"==typeof t&&t.call()):void this.ajaxDriver.ajax({type:"POST",url:this.url,data:this.data,dataType:"json",error:function(){"function"==typeof t&&t.call(null,"error")},success:function(n){e.executed=!0,"function"==typeof t&&t.call(null,null,n)}}):void("function"==typeof t&&t.call(null,"error"))},Sponsorpay.MBE.RemoteCallbackManager=function(t,e){return{callbacks:{},data:{},setData:function(t){this.data=t||{},this.data.controlNumbers&&this.data.type&&(this.data.control=this.data.controlNumbers[this.data.type]),this.callbacks={payout:new Sponsorpay.MBE.RemoteCallback("pp",e),convert:new Sponsorpay.MBE.RemoteCallback("cb",e)};for(var n in this.callbacks)this.callbacks.hasOwnProperty(n)&&(this.callbacks[n].url=this.data["url_"+this.callbacks[n].alias],this.callbacks[n].data={type:this.data.type,control:this.data.control,subid:this.data.subid,id:this.data.lpid})},getData:function(){return this.data},execute:function(t,e){return this.callbacks[t]&&this.callbacks[t].url?void this.callbacks[t].execute(e):void("function"==typeof e&&e.call(null,"error"))}}}(this,Zepto),Sponsorpay.MBE.Action=function(){this.adapter=null,this.onlyOnce=!0,this.processed=!1,this.disabled=!1},Sponsorpay.MBE.Action.prototype.canRun=function(){return!this.adapter||this.disabled?!1:this.onlyOnce&&this.processed?!1:(this.processed=!0,!0)},Sponsorpay.MBE.Action.prototype.run=function(){return"Not implemented"},Sponsorpay.MBE.Action.prototype.setAdapter=function(t){return this.adapter=t,this},Sponsorpay.MBE.Action.prototype.isVideoAction=function(){return this.adapter instanceof Sponsorpay.MBE.VideoAdapter},Sponsorpay.MBE.Action.prototype.isPageAction=function(){return this.adapter instanceof Sponsorpay.MBE.PageAdapter},Sponsorpay.MBE.Action.define=function(t){var e=new Function;return e.prototype=new Sponsorpay.MBE.Action,e.prototype.run=t,e},Sponsorpay.MBE.Action_noContent=Sponsorpay.MBE.Action.define(function(){this.canRun()&&(Sponsorpay.MBE.Tracker.plot("ERROR_OFFER_NOT_AVAIL"),this.adapter.trigger("noContent"))}),Sponsorpay.MBE.Action_Activate=Sponsorpay.MBE.Action.define(function(){this.canRun()&&(Sponsorpay.MBE.Tracker.plot(this.isVideoAction()?"OFFER_ENGAGEMENT_[[step]]_VIDEO_IMPRESSION":"OFFER_ENGAGEMENT_[[step]]_PAGE_IMPRESSION"),this.adapter.trigger("activate"))}),Sponsorpay.MBE.Action_UserAction=Sponsorpay.MBE.Action.define(function(t){this.canRun()&&this.adapter.trigger("userAction",t)}),Sponsorpay.MBE.Action_ClickThrough=Sponsorpay.MBE.Action.define(function(t,e){e&&Sponsorpay.MBE.Tracker.plot("custom",e),Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_CLICK_THROUGH",null,$.proxy(function(){this.adapter.trigger("clickThrough",t)},this))}),Sponsorpay.MBE.Action_Close=Sponsorpay.MBE.Action.define(function(){this.canRun()&&Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_CLOSE",null,$.proxy(function(){Sponsorpay.MBE.API.markAsCompleted($.proxy(function(){this.adapter.trigger("close")},this))},this))}),Sponsorpay.MBE.Action_Finish=Sponsorpay.MBE.Action.define(function(){this.canRun()&&(Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_VIDEO_FINISH"),this.adapter.trigger("finish"))}),Sponsorpay.MBE.Action_Abort=Sponsorpay.MBE.Action.define(function(){this.onlyOnce=!1,this.canRun()&&(this.adapter.trigger("abort"),Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_ABORT"),Sponsorpay.MBE.SDKInterface.notify("start","CLOSE_ABORTED"))}),Sponsorpay.MBE.Action_Start=Sponsorpay.MBE.Action.define(function(){this.canRun()&&(Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_VIDEO_START"),this.adapter.trigger("start"))}),Sponsorpay.MBE.Action_Error=Sponsorpay.MBE.Action.define(function(){this.canRun()&&(Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_VIDEO_PLAY_ERROR"),this.adapter.trigger("error"),Sponsorpay.MBE.SDKInterface.notify("start","ERROR"))}),Sponsorpay.MBE.Action_Progress=Sponsorpay.MBE.Action.define(function(t){(t>1||0>t)&&(t=0);var e=Math.floor(100*t/25);return 5===e&&(e=4),this.canRun(e)?(e>0&&4>e&&Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_VIDEO_"+25*e),this.adapter.trigger("progress",e),e):e}),Sponsorpay.MBE.Action_Progress.prototype.canRun=function(t){return!this.adapter||this.disabled?!1:(this.processed===!1&&(this.processed=[]),this.processed[t]?!1:(this.processed[t]=!0,!0))},Sponsorpay.MBE.Adapter=function(){this.actions={},this.shown=!1,this.adapterType="",this.params={},$.extend(this,new Sponsorpay.MBE.EventEmitter),this.triggerOnBind("activate")},Sponsorpay.MBE.Adapter.prototype.init=function(){return this.offer=Sponsorpay.MBE.IndexController?Sponsorpay.MBE.IndexController.getCurrentOffer():null,this.initialized?!1:this.initialized=!0},Sponsorpay.MBE.Adapter.prototype.setParams=function(t){this.params=this.parseParams(t)},Sponsorpay.MBE.Adapter.prototype.render=function(){return"Not implemented"},Sponsorpay.MBE.Adapter.prototype.getTopbarMessage=function(){return"Not implemented"},Sponsorpay.MBE.Adapter.prototype.defineCustomParams=function(){return{}},Sponsorpay.MBE.Adapter.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.Adapter.prototype.hasAppStoreLogo=function(){return!0},Sponsorpay.MBE.Adapter.prototype.parseParams=function(){return null},Sponsorpay.MBE.Adapter.prototype.on_Close=function(){var t=Sponsorpay.MBE.Utils;return Sponsorpay.MBE.Stage.isRewarded()?(this.actions.close.run(),!1):(this.params.confirmClose&&!Sponsorpay.MBE.Extensions.MRAID.isExtended()?t.Dialog.confirm(t.l10n.get("Do you wish to forfeit your reward?"),t.l10n.get("Exit"),t.l10n.get("Continue"),$.proxy(function(t){t&&this.actions.abort.run()},this)):this.actions.abort.run(),!1)},Sponsorpay.MBE.Adapter.prototype.on_AfterInsert=function(){return"Not implemented"},Sponsorpay.MBE.PageAdapter=function(){this.type="unknown",this.adapterType="page"},Sponsorpay.MBE.PageAdapter.prototype=new Sponsorpay.MBE.Adapter,Sponsorpay.MBE.PageAdapter.prototype.init=function(t){Sponsorpay.MBE.Adapter.prototype.init.call(this)&&(this.$element=null,this.type=t||"unknown",this.actions={activate:(new Sponsorpay.MBE.Action_Activate).setAdapter(this),close:(new Sponsorpay.MBE.Action_Close).setAdapter(this),abort:(new Sponsorpay.MBE.Action_Abort).setAdapter(this),error:(new Sponsorpay.MBE.Action_Error).setAdapter(this),userAction:(new Sponsorpay.MBE.Action_UserAction).setAdapter(this)},this._callbacks={})},Sponsorpay.MBE.PageAdapter.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.PageAdapter.prototype.hasAppStoreLogo=function(){return!0},Sponsorpay.MBE.PageAdapter.prototype.getTopbarMessage=function(){return Sponsorpay.MBE.Utils.l10n.get("Thanks for watching!")},Sponsorpay.MBE.PageAdapter.prototype.getElement=function(){return this.$element},Sponsorpay.MBE.PageAdapter.prototype.install=function(t){if(this.offer){var e=Sponsorpay.MBE.API,n=this.offer.get("engagement");if(n){var o="undefined"!=typeof this.params.backgroundTracking?!!this.params.backgroundTracking&&!!n.hasBackgroundTracking():!!n.hasBackgroundTracking();switch(o&&n.backgroundTrack(),!0){case!o:e.follow(t);break;case o&&!e.supportsInstall():e.follow(n.urlForAppleStore());break;case o&&e.supportsInstall():Sponsorpay.MBE.Utils.goto(n.urlForInstall())}}}},Sponsorpay.MBE.PageAdapter.prototype.parseParams=function(t){var e={htmlId:"",confirmClose:!0,content:{},presentation:{},behavior:{}},n=[],o=this.defineCustomParams();for(var r in o)e[r]=o[r],"boolean"==typeof e[r]&&n.push(r);if("undefined"==typeof t)return e;if("string"==typeof t)return e.htmlId=t,e;var i=Sponsorpay.MBE.Utils.parseParams(t,e,n);return i},Sponsorpay.MBE.PageAdapter.prototype.getThemeLocation=function(){var t=this.params.presentation.themeLocation||Sponsorpay.MBE.API.getEnv("pageThemeLocation");if(t)return"/"!=t.substr(-1,1)?t+"/":t;var e=this.params.presentation.themeHostname||Sponsorpay.MBE.API.getEnv("pageThemeHostname");return e?(e.match(/^https?/)||(e="//"+e),"/"!=e.substr(-1,1)&&(e+="/")):e="/",e+"assets/mbe/page_themes/"},Sponsorpay.MBE.PageAdapter.prototype.getThemeFileName=function(t){return this.type+"-"+this.getThemeName(t)+".css"},Sponsorpay.MBE.PageAdapter.prototype.getThemeName=function(t){return(t||this.params.presentation.theme||"default").replace(" ","_")},Sponsorpay.MBE.PageAdapter.prototype.loadTheme=function(t){t=this.getThemeName(t);var e="page-theme-"+this.type+"-"+t;return $("#"+e).length>0?!1:($('<link class="page-applied-theme" id="'+e+'" rel="stylesheet" media="screen" type="text/css">').attr("href",this.getThemeLocation()+this.getThemeFileName(t)).appendTo("head"),!0)},Sponsorpay.MBE.PageAdapter.prototype.applyTheme=function(){var t="",e=this.params.presentation;$(".page-applied-theme").remove(),this.loadTheme(e.theme)&&(e.bgLandscape&&(t+=".page { background-image: url("+e.bgLandscape+"); }"),e.bgPortrait&&(t+="body.portrait .page { background-image: url("+e.bgPortrait+"); }",t+="@media screen and (orientation: portrait) { body .page { background-image: url("+e.bgPortrait+"); } }"),""!==t&&$('<style class="page-applied-theme" type="text/css">').appendTo("head").text(t))},Sponsorpay.MBE.CheatDetector=function(){this.timer=null,this.interval=null,this.currentVideoTime=null,this.methods=null,this.initialized=!1,this.paused=!1},Sponsorpay.MBE.CheatDetector.prototype.setup=function(t){this.methods=t},Sponsorpay.MBE.CheatDetector.prototype.pause=function(){this.paused=!0},Sponsorpay.MBE.CheatDetector.prototype.resume=function(){this.paused=!1},Sponsorpay.MBE.CheatDetector.prototype.init=function(t){t=t||0,this.paused=!1,this.methods&&!this.initialized&&(this.timer=(new Date).getTime()+t,this.currentVideoTime=this.methods.videoTimeReader(),this.interval||(this.interval=setInterval($.proxy(function(){this.paused||(this.methods.videoTimeReader()-this.currentVideoTime>2?this.methods.videoSeeker(this.currentVideoTime):this.currentVideoTime=this.methods.videoTimeReader())},this),500)),this.initialized=!0)},Sponsorpay.MBE.CheatDetector.prototype.verify=function(t){return this.methods&&this.initialized?(0|((new Date).getTime()-this.timer)/1e3+1)>=(0|t)?(clearInterval(this.interval),!0):(this.timer=new Date,this.methods.videoSeeker(0),this.methods.videoStarter(),!1):!1},Sponsorpay.MBE.VideoAdapter=function(){this.adapterType="video"},Sponsorpay.MBE.VideoAdapter.prototype=new Sponsorpay.MBE.Adapter,Sponsorpay.MBE.VideoAdapter.prototype.init=function(){Sponsorpay.MBE.Adapter.prototype.init.call(this)&&(this.actions={activate:(new Sponsorpay.MBE.Action_Activate).setAdapter(this),close:(new Sponsorpay.MBE.Action_Close).setAdapter(this),finish:(new Sponsorpay.MBE.Action_Finish).setAdapter(this),abort:(new Sponsorpay.MBE.Action_Abort).setAdapter(this),start:(new Sponsorpay.MBE.Action_Start).setAdapter(this),error:(new Sponsorpay.MBE.Action_Error).setAdapter(this),clickThrough:(new Sponsorpay.MBE.Action_ClickThrough).setAdapter(this),noContent:(new Sponsorpay.MBE.Action_noContent).setAdapter(this),progress:(new Sponsorpay.MBE.Action_Progress).setAdapter(this)},this._callbacks={})},Sponsorpay.MBE.VideoAdapter.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.VideoAdapter.prototype.hasAppStoreLogo=function(){return!1},Sponsorpay.MBE.VideoAdapter.prototype.adjustWidth=function(t){return t},Sponsorpay.MBE.VideoAdapter.prototype.adjustHeight=function(t){return t},Sponsorpay.MBE.VideoAdapter.prototype.getTopbarMessage=function(){return Sponsorpay.MBE.Utils.l10n.get("Watch the video to earn your reward")},Sponsorpay.MBE.VideoAdapter.prototype.parseParams=function(t){var e={url:"",controls:!0,autoplay:!0,inline:!1,useLayover:!1,confirmClose:!0},n=["autoplay","controls","inline","confirmClose","useLayover"],o=this.defineCustomParams();for(var r in o)e[r]=o[r],"boolean"==typeof e[r]&&n.push(r);return"undefined"==typeof t?e:"string"==typeof t?(e.url=t,e):(Sponsorpay.MBE.API.isBrowser()&&!Sponsorpay.MBE.API.isMRAID()&&Sponsorpay.MBE.Utils.isTouchDevice()&&(t.autoplay=!1),Sponsorpay.MBE.Utils.isIPAD()&&5==Sponsorpay.MBE.Utils.getIOSMajorVersion()&&(t.autoplay=!1),Sponsorpay.MBE.Utils.parseParams(t,e,n))},Sponsorpay.MBE.PageAdapter_DUMMY=function(){this.init("dummy")},Sponsorpay.MBE.PageAdapter_DUMMY.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_DUMMY.prototype.render=function(){var t=$("<div id='dummy-page'>This is a page</div>");return t},Sponsorpay.MBE.PageAdapter_HTML=function(){this.init("html")},Sponsorpay.MBE.PageAdapter_HTML.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_HTML.prototype.render=function(){return""===this.params.htmlId?null:(this.$element=$("#"+this.params.htmlId),this.$element.addClass("page"),this.$element.length>0?this.$element:null)},Sponsorpay.MBE.PageAdapter_HTML.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_HTML.prototype.hasAppStoreLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_CPI=function(){this.init("cpi")},Sponsorpay.MBE.PageAdapter_CPI.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_CPI.prototype.render=function(){function t(t,e){return e=e||"",t=t.split("."),o[t[0]]&&"undefined"!=typeof o[t[0]][t[1]]?o[t[0]][t[1]]:e}var e,n,o=this.params,r=this;if(this.applyTheme(),e=$('<div class="page page-cpi">            <div class="content-wrapper">              <div class="content">                <div class="icon-wrapper">                  <img class="icon">                </div>                <div class="body-wrapper">                  <h1></h1>                  <span class="publisher"></span>                  <span class="price"></span>                </div>                <a href="#" class="action-button">                  <span></span>                </a>              </div>            </div>          </div>'),o.presentation.bgLandscape||e.addClass("default"),e.find("a.action-button > span").text(Sponsorpay.MBE.Utils.l10n.get("Free Install!")),e.find("h1").html(t("content.title")),e.find(".publisher").html(t("content.publisher")),e.find(".price").html(t("content.price")),e.find("img.icon").attr("src",t("content.icon")),n=t("content.installUrl"),"object"==typeof n)switch(!0){case Sponsorpay.MBE.Utils.isAndroid():n=n.android?n.android:n.Android;break;case Sponsorpay.MBE.Utils.isIOS():n=n.ios?n.ios:n.iOS?n.iOS:n.Ios;break;default:n=n.unknown?n.unknown:n.Unknown?n.Unknown:"x"}return e.find(".action-button").attr("href",n),t("presentation.bgPortrait")&&e.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",t("presentation.bgPortrait")).addClass("bg-cache-portrait")),t("presentation.bgLandscape")&&e.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",t("presentation.bgLandscape")).addClass("bg-cache-landscape")),this.params.htmlId&&e.attr("id",this.params.htmlId),Sponsorpay.MBE.Utils.isTouch()||e.find("a.action-button").on("click",function(t){return t.preventDefault(),!1}),e.find("a.action-button").on(Sponsorpay.MBE.Utils.isTouch()?"touchend":"click",function(){var t=$(this);return t.hasClass("active")?!1:(t.addClass("active"),r.actions.userAction.run(t.attr("href")),Sponsorpay.MBE.API.track("PAGE_CLICK",null,function(){r.params.behavior.preventDefault||r.install(t.attr("href"))}),!1)}),this.$element=e},Sponsorpay.MBE.PageAdapter_BANNER=function(){this.init("banner")},Sponsorpay.MBE.PageAdapter_BANNER.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_BANNER.prototype.render=function(){function t(t,e){return e=e||"",t=t.split("."),o[t[0]]&&"undefined"!=typeof o[t[0]][t[1]]?o[t[0]][t[1]]:e}var e,n,o=this.params,r=this;this.applyTheme(),n=$('<div class="page page-banner">            <div class="content-wrapper">              <div class="content">                <h1></h1>                <a href="#" class="action-button">                  <span></span>                </a>                <p class="description"></p>              </div>            </div>          </div>'),o.presentation.bgLandscape||n.addClass("default");var i=n.find("a.action-button"),a=t("presentation.buttonColor","#8b9dc3,#3b5998").split(",").map(function(t){return t.trim()});return a.length>1&&(i.css({"background-image":"-webkit-gradient(linear,left top,left bottom,color-stop(0%,"+a[0]+"),color-stop(100%,"+a[1]+")"}),i.css({"background-image":"-webkit-linear-gradient(top,"+a[0]+" 0%,"+a[1]+" 100%)"})),i.css({"background-color":a[0]}),i.css({color:t("presentation.buttonLabelColor","#fff")}),i.find("span").text(o.content.buttonLabel),n.find("h1").html(t("content.title")),n.find("p.description").html(t("content.description")),e=t("content.bannerUrl","#"),"#"==e&&(e=t("content.url","#")),i.attr("href",e),t("presentation.bgPortrait")&&n.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",t("presentation.bgPortrait")).addClass("bg-cache-portrait")),t("presentation.bgLandscape")&&n.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",t("presentation.bgLandscape")).addClass("bg-cache-landscape")),this.params.htmlId&&n.attr("id",this.params.htmlId),Sponsorpay.MBE.Utils.isTouch()&&i.on("click",function(t){return t.preventDefault(),!1}),i.on(Sponsorpay.MBE.Utils.isTouch()?"touchend":"click",function(){return $(this).hasClass("active")?!1:($(this).addClass("active"),r.actions.userAction.run($(this).attr("href")),Sponsorpay.MBE.API.track("PAGE_CLICK"),!1)}),this.$element=n},Sponsorpay.MBE.PageAdapter_BANNER.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_BANNER.prototype.hasAppStoreLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_PVQ=function(){this.init("pvq")},Sponsorpay.MBE.PageAdapter_PVQ.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_PVQ.prototype.render=function(){function t(t,e){return e=e||"",t=t.split("."),n[t[0]]&&"undefined"!=typeof n[t[0]][t[1]]?n[t[0]][t[1]]:e}var e,n=this.params,o=Sponsorpay.MBE.Utils.isTouch(),r=o?"touchend.sp":"click.sp",i=Sponsorpay.MBE.API;i.track("PREVALIDATION_IMPRESSION"),this.applyTheme();var a=t("presentation.bgLandscape",""),s=t("presentation.bgPortrait","");e=$('<div class="page page-pvq">            <div class="content-wrapper">               <div class="content">                 <h2></h2>                <ul class="answers">                  <li class="in"><a class="action-button" href="#"   data-answer="get_in"></a></li>                  <li class="out"><a class="action-button" href="#"  data-answer="get_out"></a></li>                  <li class="skip"><a class="action-button" href="#" data-answer="get_out">Skip &raquo;</a></li>                </ul>              </div>            </div>          </div>'),e.find("h2").html(t("content.title")),e.find(".in a").html(t("content.getInText")),e.find(".out a").html(t("content.getOutText")),a||s||e.addClass("default");
var p=e.find(".action-button");s&&e.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",s).addClass("bg-cache-portrait")),a&&e.append($("<img/>").css({position:"absolute",width:0,height:0,top:"-9999px"}).attr("src",s).addClass("bg-cache-landscape")),o&&p.on("click",function(t){return t.preventDefault(),!1});var c="";return p.on(r,function(){if(""!=c)return!1;$(this).parent().addClass("selected"),c=$(this).addClass("active").data("answer");var t=window.Sponsorpay;return t&&t.MBE&&t.MBE.IndexController&&"function"==typeof t.MBE.IndexController.pvqHandler&&t.MBE.IndexController.pvqHandler(c),"get_in"==c&&(i.track("PREVALIDATION_ENTRANCE"),i.go()),!1}),setTimeout(function(){e.css({display:"table"})},30),this.$element=e},Sponsorpay.MBE.PageAdapter_PVQ.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_PVQ.prototype.hasAppStoreLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_FAILURE=function(){this.init("failure"),this.actions.activate.disabled=!0},Sponsorpay.MBE.PageAdapter_FAILURE.prototype=new Sponsorpay.MBE.PageAdapter,Sponsorpay.MBE.PageAdapter_FAILURE.prototype.render=function(){this.applyTheme();var t=$('<div class="page page-failure">            <div class="content-wrapper">              <div class="content">                <p class="description"></p>              </div>            </div>          </div>');return this.params.confirmClose=!1,Sponsorpay.MBE.API.topbarText(" "),t.find("p.description").html(this.params.content.description),this.$element=t},Sponsorpay.MBE.PageAdapter_FAILURE.prototype.hasSponsorpayLogo=function(){return!1},Sponsorpay.MBE.PageAdapter_FAILURE.prototype.hasAppStoreLogo=function(){return!1},Sponsorpay.MBE.VideoAdapter_VIMEO=function(){this.init()},Sponsorpay.MBE.VideoAdapter_VIMEO.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_VIMEO.prototype.render=function(t,e){e=this.parseParams(e);var n=e.url.split("?")[0];$(window).on("message",$.proxy(function(t){var e=JSON.parse(t.data);switch(e.event){case"ready":var r=o.get(0).contentWindow;r.postMessage(JSON.stringify({method:"addEventListener",value:"play"}),n),r.postMessage(JSON.stringify({method:"addEventListener",value:"finish"}),n),r.postMessage(JSON.stringify({method:"addEventListener",value:"playProgress"}),n);break;case"loadProgress":case"pause":case"seek":break;case"playProgress":e.data.percent>=1&&this.events.finish.run();break;case"play":this.events.start.run();break;case"finish":this.events.finish.run();break;default:this.events.error.run(),this.trigger("error")}},this));var o,r;setTimeout(function(){r="?api=1",e.autoplay&&(r+="&autoplay=1"),o=$('<iframe style="width: 100%; height: '+$(window).height()+'px" src="'+e.url+r+'" frameborder="0"></iframe>'),$("#"+t).html(o)},0)},Sponsorpay.MBE.VideoAdapter_YOUTUBE=function(){this.init()},Sponsorpay.MBE.VideoAdapter_YOUTUBE.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_YOUTUBE.prototype.render=function(){function t(){i.ytPlayer=new YT.Player("player",{controls:0,videoId:e,playerVars:{controls:0,enablejsapi:1,rel:0,playsinline:i.params.inline-0,autoplay:i.params.autoplay-0,modestbranding:1,showinfo:0},events:{onError:i.YTCallbacks.onError,onReady:i.YTCallbacks.onPlayerReady}})}var e=this.retrieveVideoIdFromParams(this.params);if(!e)return null;var n=Sponsorpay.MBE.Utils;n.isAndroid()&&(n.getAndroidMajorVersion()>4||4==n.getAndroidMajorVersion()&&n.getAndroidMinorVersion()>0)&&(this.params.autoplay=!1),n.load("//www.youtube.com/iframe_api");var o;this.ytPlayer=null;var r=new Sponsorpay.MBE.CheatDetector;r.setup({videoTimeReader:$.proxy(function(){return this.ytPlayer.getCurrentTime()},this),videoSeeker:$.proxy(function(t){this.ytPlayer.seekTo(t,!0)},this),videoStarter:$.proxy(function(){this.ytPlayer.playVideo()},this)});var i=this,a=!1;return this.YTCallbacks={onError:$.proxy(function(){this.actions.error.run()},i),onPlayerStateChange:$.proxy(function(t){if(t.target.getPlayerState)switch(t.target.getPlayerState()){case YT.PlayerState.BUFFERING:this.ytPlayer.playVideo();break;case YT.PlayerState.ENDED:var e=this.ytPlayer.getDuration();r.verify(e)&&(clearInterval(o),this.actions.finish.run());break;case YT.PlayerState.PAUSED:r.pause();break;case YT.PlayerState.PLAYING:r.init(),this.actions.start.run(),o||(o=setInterval($.proxy(function(){this.actions.progress.run(this.ytPlayer.getCurrentTime()/this.ytPlayer.getDuration())},this),1e3))}},i),onPlayerReady:$.proxy(function(t){a||(a=!0,this.ytPlayer.addEventListener("onStateChange",this.YTCallbacks.onPlayerStateChange),this.params.autoplay&&setTimeout(function(){t.target.playVideo()},1e3))},this)},"object"==typeof YT&&YT.Player?setTimeout(function(){t()},500):window.onYouTubeIframeAPIReady=function(){t()},this.params.useLayover=!0,"<div id='player' style='border:0; width: 100%; height: 100%;'></div>"},Sponsorpay.MBE.VideoAdapter_YOUTUBE.prototype.adjustHeight=function(t){return Sponsorpay.MBE.Utils.isAndroid()?t-100:t},Sponsorpay.MBE.VideoAdapter_YOUTUBE.prototype.retrieveVideoIdFromParams=function(t){var e=t.url;e.match("^//|^http")||(e="//"+e);var n=document.createElement("a");if(n.href=e.replace("www.",""),"youtube.com"!=n.hostname&&"youtu.be"!=n.hostname)return null;e=n.href;var o=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return o?o[1]:null},Sponsorpay.MBE.VideoAdapter_HTML5=function(){this.init(),this.on("topbar",function(){Sponsorpay.MBE.API.supportsNativePlayer()&&Sponsorpay.MBE.API.hideCloseButton()})},Sponsorpay.MBE.VideoAdapter_HTML5.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_HTML5.prototype.render=function(){function t(t){var e=Sponsorpay.MBE.SDKInterface;return e.do_play("local",t,!Sponsorpay.MBE.Stage.isRewarded(),Sponsorpay.MBE.Utils.l10n.get("Do you wish to forfeit your reward?"),""!=$.trim(this.params.clickThroughUrl)?this.params.clickThroughUrl:void 0),e.on("play",$.proxy(function(t){if("local"==t.tpn)switch(t.result){case"clickThrough":this.actions.clickThrough.run(this.params.clickThroughUrl,this.params.clickTrackingUrl);break;case"cancel":this.actions[Sponsorpay.MBE.Stage.isRewarded()?"close":"abort"].run();break;case"ended":this.actions.finish.run();break;case"timeupdate":this.actions.progress.run(parseFloat(t.currentTime)/parseFloat(t.duration));break;case"playing":if(this.actions.start.processed)return;this.actions.start.run();break;case"error":default:this.actions.error.run()}},this)),""}function e(t){var e=$('<video src="'+t+'"></video>'),n=new Sponsorpay.MBE.CheatDetector;return n.setup({videoTimeReader:function(){return e.get(0).currentTime},videoSeeker:function(t){e.get(0).currentTime=t},videoStarter:function(){e.get(0).play()}}),this.params.controls&&e.attr("controls","controls"),this.params.autoplay&&e.attr("autoplay","autoplay"),this.params.inline&&e.attr("webkit-playsinline","webkit-playsinline"),e.on("timeupdate",$.proxy(function(t){this.actions.progress.run(t.target.currentTime/t.target.duration)},this)),e.on("error",$.proxy(function(){this.actions.error.run()},this)),e.on("pause",function(){n.pause()}),e.on("playing",$.proxy(function(){n.resume(),this.actions.start.processed||(n.init(),this.actions.start.run())},this)),e.on("ended",$.proxy(function(t){n.verify(t.target.duration)&&this.actions.finish.run()},this)),e}var n=this.params.url.split("?")[0];return""==n&&(n=this.params.html5_video_url.split("?")[0]),n=n.replace("appengage-video.s3.amazonaws.com","appengage-video.sponsorpay.com"),(Sponsorpay.MBE.API.supportsNativePlayer()?t:e).call(this,n)},Sponsorpay.MBE.VideoAdapter_HTML5.prototype.defineCustomParams=function(){return{clickThroughUrl:"",clickTrackingUrl:""}},Sponsorpay.MBE.VideoAdapter_UNRULY=function(){this.init()},Sponsorpay.MBE.VideoAdapter_UNRULY.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_UNRULY.prototype.render=function(){var t=$('<iframe allowTransparency="true" style="background-color: transparent; border:0" src="about:blank"></iframe>');return $(window).on("message",$.proxy(function(t){var e=t.data.split(":");if("unruly"==e[0]&&t.origin==window.location.protocol+"//"+window.location.host)switch(e[1]){case"play":this.actions.start.run();break;case"complete":this.actions.finish.run()}},this)),t},Sponsorpay.MBE.VideoAdapter_UNRULY.prototype.adjustWidth=function(t){return t+24},Sponsorpay.MBE.VideoAdapter_UNRULY.prototype.on_AfterInsert=function(t){var e=this.params.url.split("?")[0],n=[],o=0,r=Math.random(),i=window.location,a=i.protocol+"//"+i.host+"/assets";n[o++]="<style type='text/css'>",n[o++]="body { background-color: transparent; }",n[o++]="iframe { display: block; margin: 0 auto; margin-top: -8px;}",n[o++]="</style>",n[o++]="<script>",n[o++]="window.unrulyMacros = {};",n[o++]='window.unrulyMacros.play = "iframe_'+a+"/mbe_fwd.html?p=unruly&e=play&_="+r+'";',n[o++]='window.unrulyMacros.complete = "iframe_'+a+"/mbe_fwd.html?p=unruly&e=complete&_="+r+'";',n[o++]="</script>",n[o++]='<script src="'+e+'"></script>',t.get(0).contentWindow.document.write(n.join("\n"))},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL=function(){this.init()},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.prototype.render=function(){var t=$('<iframe allowTransparency="true" style="background-color: transparent; border:0" src="about:blank"></iframe>');return $(window).on("message",$.proxy(function(t){var e=t.data.split(":");if("unruly_carousel"==e[0]&&t.origin==window.location.protocol+"//"+window.location.host)switch(e[1]){case"play":this.actions.start.run();break;case"complete":this.actions.finish.run()}},this)),t},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.prototype.adjustWidth=function(t){return t-0},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.prototype.on_AfterInsert=function(t){t.css({"min-width":"316px","min-height":"250px"});var e=[],n=0,o=Math.random(),r=window.location;this.params.placementId=this.params.placementId||"";var i="//video.unrulymedia.com/wildfire_"+this.params.placementId+".js",a=r.protocol+"//"+r.host+"/assets";e[n++]="<style type='text/css'>",e[n++]="body { background-color: transparent; }",e[n++]="iframe { display: block; margin: 0 auto; margin-top: -8px;}",e[n++]="</style>",e[n++]="<script>",e[n++]="window.unrulyMacros = {};",e[n++]="window.unrulyMacros.responsive = true",e[n++]='window.unrulyMacros.siteRef = "'+Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.getSiteRef()+'";',e[n++]='window.unrulyMacros.play = "iframe_'+a+"/mbe_fwd.html?p=unruly_carousel&e=play&_="+o+'";',e[n++]='window.unrulyMacros.complete = "iframe_'+a+"/mbe_fwd.html?p=unruly_carousel&e=complete&_="+o+'";',e[n++]="</script>",e[n++]='<script src="'+i+'"></script>',t.get(0).contentWindow.document.write(e.join("\n"))},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.validate=function(t,e){function n(t){$("#unruly-carousel-validator").remove(),e&&e.call(null,t)}$("#unruly-carousel-validator").remove();var o=!1,r=setTimeout(function(){o=!0,n(!1)},5e3);$(window).off("message.unruly_carousel"),$(window).on("message.unruly_carousel",function(t){if(/^unruly availability:\s/.test(t.data)){if(o)return;clearTimeout(r),n("unruly availability: true"==t.data)}});var i=$('<iframe id="unruly-carousel-validator" allowTransparency="true" style="background-color: transparent; border:0" src="about:blank"></iframe>'),a=[],s=0;a[s++]="<style type='text/css'>",a[s++]="body { background-color: transparent; }",a[s++]="iframe { display: block; margin: 0 auto; margin-top: -8px;}",a[s++]="</style>",a[s++]="<script>",a[s++]="window.unrulyMacros = {};",a[s++]="window.unrulyMacros.responsive = true;",a[s++]='window.unrulyMacros.siteRef = "'+Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.getSiteRef()+'";',a[s++]="window.unrulyMacros.adAvailabilityCallback=function(valid) {window.parent.postMessage('unruly availability: ' + valid, '"+window.location.origin+"');}",a[s++]="</script>",a[s++]='<script src="'+t+'"></script>',i.appendTo(document.body).get(0).contentWindow.document.write(a.join("\n"))},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.getSiteRef=function(){var t=Sponsorpay.MBE.API.getEnv("appName","");return t=$.trim(t.toLowerCase().replace(/\s/g,"_")),""==t&&(t="unruly_test_mobile"),t},Sponsorpay.MBE.VideoAdapter_UNRULY_CAROUSEL.prototype.defineCustomParams=function(){return{placementId:""}},Sponsorpay.MBE.VideoAdapter_GIANTMEDIA=function(){this.init()},Sponsorpay.MBE.VideoAdapter_GIANTMEDIA.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_GIANTMEDIA.prototype.render=function(){var t=Sponsorpay.MBE.API.getEnv("apiHost",window.location.protocol+"//"+window.location.host),e=t+"/assets/mbe_fwd.html?p=giantmedia&e=complete&_="+(new Date).getTime(),n=this.params.videoId?"&v="+this.params.videoId:"";this.gmFrameWidth=Sponsorpay.MBE.Utils.isIPAD()?768:300,this.gmFrameHeight=Sponsorpay.MBE.Utils.isIPAD()?640:250;var o=this.params.url?this.params.url:"http://app.videostat.com/v2/iframe.php?p=109"+n+"&width="+this.gmFrameWidth+(this.gmFrameHeight>0?"&height="+this.gmFrameHeight:"")+"&click_key=1&complete_url="+encodeURIComponent(e)+"&complete_type=iframe",r=$('<iframe id="giantmedia-iframe" scrolling="no" allowTransparency="true" style="background-color: transparent; border:0" src="'+o+'"></iframe>');return $(window).on("message",$.proxy(function(t){var e=t.data.split(":");if("giantmedia"==e[0])switch(e[1]){case"complete":this.actions.finish.run();break;case"play":this.actions.start.run()}},this)),r},Sponsorpay.MBE.VideoAdapter_GIANTMEDIA.prototype.on_AfterInsert=function(t){t.css({"background-color":"black",width:this.gmFrameWidth+"px",position:"relative",margin:"0 auto",left:"-1px"})},Sponsorpay.MBE.VideoAdapter_GIANTMEDIA.prototype.on_AfterRotation=function(t){t.css({"background-color":"black",width:this.gmFrameWidth+"px",position:"relative",margin:"0 auto",left:"-1px"})},Sponsorpay.MBE.VideoAdapter_GIANTMEDIA.prototype.defineCustomParams=function(){return{videoId:""}},Sponsorpay.MBE.VideoAdapter_GROUPM=function(){this.init()},Sponsorpay.MBE.VideoAdapter_GROUPM.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_GROUPM.prototype.render=function(){var t=$('<iframe allowTransparency="true" style="background-color: transparent; border:0" src="about:blank"></iframe>');return $(window).on("orientationchange",function(e){w=e.target,setTimeout(function(){t.get(0).contentWindow.postMessage("orientationchange:"+w.orientation,"*")},500)}),t},Sponsorpay.MBE.VideoAdapter_GROUPM.prototype.on_AfterInsert=function(t){var e=[],n=0,o=(Math.random(),0),r=0,i=new Sponsorpay.MBE.CheatDetector;this.params.autoplay=!0,i.setup({videoTimeReader:function(){return r},videoSeeker:function(t){r=t},videoStarter:function(){t.get(0).contentWindow.startVideo()}}),$(window).on("message",$.proxy(function(t){var e=t.data.split(":");if("groupm"==e[0]&&t.origin==window.location.protocol+"//"+window.location.host)switch(e[1]){case"play":i.init(),this.actions.start.run();break;case"progress":r=e[2],r>0&&(o=e[3],this.actions.progress.run(r/o));break;case"complete":i.verify(o)&&this.actions.finish.run();break;case"error":Sponsorpay.MBE.Tracker.plot("OFFER_ENGAGEMENT_[[step]]_VIDEO_ADAPTER_ERROR"),this.actions.error.run()}},this)),e[n++]="<body class='"+(0===window.orientation?"portrait":"landscape")+"' style='overflow:hidden'><div id=\"_sstv\"></div>",e[n++]="<script>",e[n++]="    var sponsorpay_origin = window.location.protocol + '//' + window.location.host;    var videoObject;    !(function(window) {      window.addEventListener('message', function(evt) {        var vc = document.getElementById('videocontainer');        var data=evt.data.split(':');        if (data[0]=='orientationchange') {          videoObject.style.marginTop=(data[1]==='0'?'40%':'0');          videoObject.style.width='99.9%';          if (window.navigator.userAgent.toLowerCase().indexOf('android') == -1) {            vc.style.width='99%';            videoObject.style.width='95%';            videoObject.style.marginLeft=((target.clientWidth - videoObject.clientWidth) / 2) + 'px';            videoObject.style.marginTop='-30px';          } else {          }        }      });      var target = document.getElementById('_sstv').parentNode;      target.style.margin='0';      var observer;      var abort = false;      var to = setTimeout(function() {        abort = true;        window.parent.postMessage('groupm:error', sponsorpay_origin);      }, 10000);      if ('WebKitMutationObserver' in window) {        observer = new WebKitMutationObserver(mutationListener);        observer.observe(target, { attributes: false, childList: true, characterData: false });      } else {        target.addEventListener('DOMNodeInserted', mutationListener, false);      }      function mutationListener(data) {        if (videoObject) { return; }        if (data.type == 'DOMNodeInserted') {          if (data.target.tagName == 'VIDEO') {            videoObject = data.target;            target.removeEventListener('DOMNodeInserted', mutationListener);            addVideoListeners();          }        } else {          data.forEach(function(mutation) {            if (mutation.addedNodes.length > 0 && mutation.addedNodes[0].id == 'bodydiv') {              videoObject = mutation.addedNodes[0].getElementsByTagName('video')[0];              observer.disconnect();              addVideoListeners();            }          });        }      }      function addVideoListeners() {        if (window.navigator.userAgent.toLowerCase().indexOf('android') != -1) {          target.appendChild(videoObject);          document.getElementById('bodydiv').style.zIndex='-1000';          document.getElementById('bodydiv').style.position='absolute';          document.getElementById('bodydiv').style.left='-9999px';          document.getElementById('bodydiv').style.width='1px';          document.getElementById('bodydiv').style.height='1px';        } else {          videoObject.setAttribute('controls','controls');        }        window.clearTimeout(to);        videoObject.style.top='1%';        videoObject.addEventListener('timeupdate', function(e) {          window.parent.postMessage('groupm:progress:' + e.target.currentTime + ':' + e.target.duration, sponsorpay_origin);          videoAdSDKvp.elvideotime.style.display = 'none';        });        videoObject.addEventListener('webkitendfullscreen', function(e) {          setTimeout(function() {            var c = document.getElementById('videocontainer');            if (c) { videoObject.style.visibility='visible'; c.style.display='block'; c.style.visibility='visible'; }            if (window.navigator.userAgent.toLowerCase().indexOf('android') == -1) {              videoObject.style.height='320px';              videoObject.style.marginTop='-30px';            }          }, 100);        });        videoObject.addEventListener('ended', function(e) {          setTimeout(function() {            var c = document.getElementById('videocontainer');            if (c) { videoObject.style.visibility='visible'; c.style.display='block'; c.style.visibility='visible'; }          }, 100);          window.parent.postMessage('groupm:complete', sponsorpay_origin);        });        videoObject.addEventListener('playing', function(e) {          if (window.navigator.userAgent.toLowerCase().indexOf('android') != -1) {            videoObject.style.height='auto';          } else {            videoObject.removeAttribute('controls');            videoObject.style.height=(document.getElementById('videocontainer').clientHeight) + 'px';            videoObject.style.marginLeft=((target.clientWidth - videoObject.clientWidth) / 2) + 'px';            videoObject.style.marginTop='-30px';          }          window.parent.postMessage('groupm:play', sponsorpay_origin);        });        videoObject.addEventListener('loadstart', function(e) {          var i=0,bd=document.getElementById('bodydiv'),vc=document.getElementById('videocontainer'),cnt = document.getElementById('container');          var inter = setInterval(function() {            i++;            if (vc.style.width || i > 200) {              window.clearInterval(inter);              videoObject.style.width='90%';              videoObject.style.margin='0 auto';              videoObject.style.height='auto';              videoObject.style.marginTop=(document.body.className=='portrait'?'40%':'0');              if (window.navigator.userAgent.toLowerCase().indexOf('android') == -1) {                vc.style.width='99%';                videoObject.style.width='95%';                videoObject.style.marginLeft=((target.clientWidth - videoObject.clientWidth) / 2) + 'px';                videoObject.style.marginTop='-30px';              }              hide('videotime');              hide('videoclose');              hide('videoclickoverlay');              var el = document.getElementById('videoslider');              el && (el.style.display='none');              el = document.getElementById('videocountdown');              el && (el.parentNode.style.display='none');              videoObject.style.width='99%';            }          }, 50);        });        videoObject.addEventListener('click', function(e) {          setTimeout(function() {            videoObject.style.height='auto';          },10);        });      }      function hide(id) {        var el;        if (typeof id=='string') { el = document.getElementById(id); } else { el = id }        if (!el) return;        el.style.display='none';el.style.visibility='hidden';el.style.top='-9999px';el.style.zIndex='-100';      }    })(this);  ";var a=this.params.deviceId||this.generateBogusDID(),s=this.params.appleIdForAdvertisers||"",p=this.params.placementId||"tst-1=43";e[n++]="var _ps='"+encodeURIComponent(p)+"', idt='100', did='"+encodeURIComponent(a)+"', idfa='"+encodeURIComponent(s)+"';",e[n++]="var stag = document.createElement('script');",e[n++]="var trigger='"+encodeURIComponent("-document.body.onload|_")+"';",e[n++]='var spt = top.location.protocol || \'http:\'; if (spt.toLowerCase().replace("https:","").replace("http:","")!="") { spt="http:"; }',e[n++]="stag.src = spt + '//ads.smartstream.tv/mw/?oformat=js&rev=1002&_ps=' + _ps + '&idt=' + idt + '&did=' + did + '&idfa=' + idfa + '&trigger=' + trigger;",e[n++]="stag.addEventListener('load', loadHandler, false);",e[n++]="var sparent = document.getElementById('_sstv');",e[n++]="sparent.parentNode.insertBefore(stag,sparent);",e[n++]="  function loadHandler() {    window.open = function(){};    setTimeout(function() {      if (typeof videoAdSDKvp != 'undefined' && videoAdSDKvp.playVideo) {        videoAdSDKvp.elbodydiv.style.display='block';  ",this.params.autoplay&&(e[n++]="startVideo();"),e[n++]="      }    }, 2000);  }  function startVideo() {    if (typeof videoAdSDKvp == 'undefined') {      return;    }    videoAdSDKvp.elvideocontainer.style.display='block';    if (!(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent))) {      videoAdSDKvp.playVideoTriggered();    } else {      videoAdSDKvp.addVideoEventListeners && videoAdSDKvp.addVideoEventListeners();    }  }  ",e[n++]="</script>",e[n++]="</body>";var c=t.get(0).contentWindow;c&&c.document.write(e.join("\n"))},Sponsorpay.MBE.VideoAdapter_GROUPM.prototype.adjustWidth=function(t){return 0===window.parent.orientation?t+11:t},Sponsorpay.MBE.VideoAdapter_GROUPM.prototype.generateBogusDID=function(){var t,e,n=[],o=Sponsorpay.MBE.Tracker.getData();if(null===o){for(e="abcdef1234567890",t=0;32>t;t++)n.push(e[0|Math.random()*e.length]);n=n.join("")}else e=o.appid+""+o.userid,n=e.split("").map(function(t){return t.charCodeAt(0).toString(16)}).join("").substr(0,32),n+=new Array(33-n.length).join("f");return n},Sponsorpay.MBE.VideoAdapter_GROUPM.prototype.defineCustomParams=function(){return{deviceId:"",appleIdForAdvertisers:"",placementId:""}},Sponsorpay.MBE.VideoAdapter_HYPRMX=function(){this.init()},Sponsorpay.MBE.VideoAdapter_HYPRMX.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_HYPRMX.prototype.defineCustomParams=function(){return{noVideoMessage:"Sorry, no content available at the moment.",distributorId:2734612,hyprmxHost:"live.hyprmx.com"}},Sponsorpay.MBE.VideoAdapter_HYPRMX.prototype.render=function(){var t=this.params.url?this.params.url:window.location.protocol+"//"+this.params.hyprmxHost+"/embedded_videos/player?reward="+encodeURIComponent(Sponsorpay.MBE.API.getEnv("virtualCurrency"))+"&uid="+encodeURIComponent(Sponsorpay.MBE.API.getEnv("uniqid"))+"&site="+encodeURIComponent(Sponsorpay.MBE.API.getEnv("appName"))+"&distributorid="+this.params.distributorId,e=$('<iframe id="hyprmx-iframe" scrolling="no" allowTransparency="true" style="background-color: transparent; border:0" src="'+t+'"></iframe>');return $(window).on("message",$.proxy(function(t){var e=t.data.split(":");if("hyprmx"==e[0])switch(e[1]){case"complete":this.actions.finish.run();break;case"no_video":t.source.postMessage("MBE_MESSAGE:"+this.params.noVideoMessage,window.location.href),this.actions.noContent.run();break;case"play":this.actions.start.run()}},this)),e},Sponsorpay.MBE.VideoAdapter_VAST=function(){this.init(),this.VASTClient=Sponsorpay.MBE.Extensions.VAST,this.on("topbar",function(){Sponsorpay.MBE.API.supportsNativePlayer()&&Sponsorpay.MBE.API.hideCloseButton()})},Sponsorpay.MBE.VideoAdapter_VAST.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_VAST.prototype.setVASTClient=function(t){this.VASTClient=t},Sponsorpay.MBE.VideoAdapter_VAST.prototype.render=function(){function t(t){var e=Sponsorpay.MBE.SDKInterface;e.do_play("local",t.fileURL,!Sponsorpay.MBE.Stage.isRewarded(),Sponsorpay.MBE.Utils.l10n.get("Do you wish to forfeit your reward?"),t.clickThrough.url),n("creativeView",t),n("impression",t),e.on("play",$.proxy(function(e){if("local"==e.tpn)switch(e.result){case"clickThrough":this.actions.clickThrough.run(t.clickThrough.url,t.clickThrough.trackingUrl);break;case"cancel":this.actions[Sponsorpay.MBE.Stage.isRewarded()?"close":"abort"].run();break;case"ended":n("complete",t),this.actions.finish.run();break;case"timeupdate":this.actions.progress.run(parseFloat(e.currentTime)/parseFloat(e.duration));for(var o in i)i[o]>0&&e.currentTime>=i[o]&&(i[o]=0,n(o,t));break;case"playing":if(this.actions.start.processed)return;var o=e.duration/4;i={firstQuartile:o,midpoint:2*o,thirdQuartile:3*o},n("start",t),this.actions.start.run();break;case"error":default:this.actions.error.run()}},this))}function e(t){var e=this,o=new Sponsorpay.MBE.CheatDetector;r.attr("src",t.fileURL),setTimeout(function(){o.setup({videoTimeReader:function(){return r.get(0).currentTime},videoSeeker:function(t){r.get(0).currentTime=t},videoStarter:function(){r.get(0).play()}}),o.init(-1600)},1e3),r.on("timeupdate",function(o){e.actions.progress.run(o.target.currentTime/o.target.duration);for(var r in i)i[r]>0&&o.target.currentTime>=i[r]&&(i[r]=0,n(r,t))}),r.on("error",function(){e.actions.error.run()}),r.on("playing",function(o){if(!e.actions.start.processed){var r=o.target.duration/4;i={firstQuartile:r,midpoint:2*r,thirdQuartile:3*r},n("start",t),e.actions.start.run()}}),r.on("ended",function(r){n("complete",t),o.verify(r.target.duration)&&e.actions.finish.run()}),n("creativeView",t),n("impression",t),r.data("ready",!0)}function n(t,e){e.tracking[t]&&e.tracking[t].forEach(function(t){Sponsorpay.MBE.Tracker.plot("custom",t.trim())}),e.wrapperTracks&&e.wrapperTracks.forEach(function(e){e.trackingEvents.forEach(function(e){e[t]&&e[t].forEach(function(t){Sponsorpay.MBE.Tracker.plot("custom",t.trim())})})})}var o=(this.params.url,this),r=null,i={firstQuartile:0,midpoint:0,thirdQuartile:0};return this.VASTClient.on("data",function(n){Sponsorpay.MBE.API.supportsNativePlayer()?(t.call(o,n),o.trigger("render",r)):(r=$("<video autoplay></video>"),o.params.inline&&r.attr("webkit-playsinline","webkit-playsinline"),o.params.controls&&r.attr("controls","controls"),setTimeout(function(){e.call(o,n),o.trigger("render",r)},100))}),this.VASTClient.on("failure",function(){Sponsorpay.MBE.Tracker.plot("WARNING_VAST_EMPTY"),o.actions.error.run()}),this.VASTClient.on("error",function(){o.actions.error.run()}),this.VASTClient.fetchTag(this.params.url),null},Sponsorpay.MBE.VideoAdapter_DUMMY=function(){this.init()},Sponsorpay.MBE.VideoAdapter_DUMMY.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_DUMMY.prototype.render=function(){var t=$("<div id='dummy-video'>This is a video</div>");return t},Sponsorpay.MBE.VideoAdapter_DUMMY.prototype.on_AfterInsert=function(){setTimeout($.proxy(function(){this.actions.start.run(),this.actions.progress.run(0)},this),500),setTimeout($.proxy(function(){this.actions.progress.run(100),this.actions.finish.run()},this),1e3)},Sponsorpay.MBE.VideoAdapter_MEDIATOR=function(){this.init()},Sponsorpay.MBE.VideoAdapter_MEDIATOR.prototype=new Sponsorpay.MBE.VideoAdapter,Sponsorpay.MBE.VideoAdapter_MEDIATOR.prototype.render=function(){function t(t){Sponsorpay.MBE.Tracker.plot("TPN_PLAY_"+n.toUpperCase()+"_"+t.replace(/\s/g,"_"))}var e=Sponsorpay.MBE.SDKInterface,n=this.params.affiliate_network_type,o=this.params.id;return e.do_play(n,o),e.on("play",$.proxy(function(e){if(e.tpn==n&&e.id==o)switch(t(e.result.toUpperCase()),e.result){case"closed":this.actions[Sponsorpay.MBE.Stage.isRewarded()?"close":"abort"].run();break;case"started":this.actions.start.run();break;case"finished":this.actions.finish.run();break;case"aborted":case"no_sdk":case"no_video":case"timeout":case"error":this.actions.abort.run();break;default:this.actions.error.run()}},this)),""},Sponsorpay.MBE.VideoAdapter_MEDIATOR.prototype.defineCustomParams=function(){return{affiliate_network_type:"",id:""}};