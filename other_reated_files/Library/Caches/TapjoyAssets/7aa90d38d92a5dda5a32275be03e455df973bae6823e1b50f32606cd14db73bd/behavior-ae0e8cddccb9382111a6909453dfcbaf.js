(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n={}.hasOwnProperty,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Tapjoy.MraidUnit=function(n){function i(){return this.fixBackButton=t(this.fixBackButton,this),this.closeMraid=t(this.closeMraid,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){return"featured"===this.ad.source&&$.ajax({url:Tapjoy.AdUnit.settings.click_url,dataType:"json"}),this.displayRichMedia(unescape(this.ad.attributes.mraid_content+this.conversionMethodTemplate()),this.ad.attributes.display_type,this.ad.attributes.width,this.ad.attributes.height,this.closeMraid),setTimeout(this.fixBackButton,500)},i.prototype.closeMraid=function(){var t=this;return setTimeout(function(){return"offerwall"===t.offer.source?($("<a/>").attr("href",t.offer.attributes.offerwall_url).appendTo($("body")).trigger("click"),t.closeRequested=n.closeRequested):t.dismiss()},0)},i.prototype.fixBackButton=function(){var t=this;return $.os.ios?(this.setAllowRedirect(!1),setTimeout(function(){return $("<iframe />").attr("src","mraid://allowCustomClose?isCustomClose=N").appendTo("body"),t.setAllowRedirect(!0)},500)):void 0},i.prototype.conversionMethodTemplate=function(){return"<script type='text/javascript'>\n  var trackingOffers = "+JSON.stringify(this.ad.attributes.tracking_offers)+";\n  var sendConversionRequest = function() {\n    httpRequest = new XMLHttpRequest();\n    httpRequest.open('GET', '"+Tapjoy.AdUnit.settings.conversion_url+'\');\n    httpRequest.setRequestHeader("Content-Type", "application/json");\n    httpRequest.send();\n };\n var sendTrackingImpression = function(id){\n  if(trackingOffers[id]){\n    xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("POST",trackingOffers[id].impression,true);\n    xmlhttp.setRequestHeader("Content-Type", "application/json");\n    xmlhttp.send();\n  }\n };\n var sendTrackingClick = function(id){\n  if(trackingOffers[id]){\n    xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("GET",trackingOffers[id].click,true);\n    xmlhttp.setRequestHeader("Content-Type", "application/json");\n    xmlhttp.send();\n  }\n };\n var sendTrackingConversion = function(id){\n  if(trackingOffers[id]){\n    xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("GET",trackingOffers[id].conversion,true);\n    xmlhttp.setRequestHeader("Content-Type", "application/json");\n    xmlhttp.send();\n  }\n };\n var getTrackingOfferType = function(id){\n  if(trackingOffers[id]){\n    return trackingOffers[id].type;\n  }\n  else  {\n    return "";\n  }\n };\n var getTrackingOfferReward = function(id){\n  if(trackingOffers[id]){\n    return trackingOffers[id].reward_amount;\n  }\n  else  {\n    return 0;\n  }\n };\n </script>'},i}(Tapjoy.AdUnit)}).call(this);