(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,s=function(t,s){function i(){this.constructor=t}for(var n in s)e.call(s,n)&&(t[n]=s[n]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t};Tapjoy.ConnectUnit=function(e){function i(){return this.processEvent=t(this.processEvent,this),this.testLogic=t(this.testLogic,this),this.setReady=t(this.setReady,this),this.loadRules=t(this.loadRules,this),this.prepareCache=t(this.prepareCache,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.initialize=function(){return this.ready=!1,this.loadRules(),null!=this.ad.frame_set&&this.selectFrames(),this.settings().supports.caching?this.prepareCache():void 0},i.prototype.prepareCache=function(){var t,e,s,i;for(this.setEventPreloadLimit(3),i=this.ad.assets,e=0,s=i.length;s>e;e++)t=i[e],this.cacheAsset(t,null,864e3);return this.ad.videoOffer&&this.cacheAsset(this.ad.videoOffer.url,this.ad.videoOffer.id),null!=this.ad.close_button_image?this.cacheAssetWithTags(this.ad.close_button_image,null,864e3,[{name:"close_button_image",unique:!0}]):void 0},i.prototype.loadRules=function(){return this.setReady()},i.prototype.setReady=function(){return this.ready=!0,this.log("Events proxy is ready")},i.prototype.testLogic=function(t){return this.log("Event name is "+t.event_name),"optimization_test"!==t.event_name},i.prototype.processEvent=function(t,e){return this.log("Processing request "+e),this.ready||this.eventOptimizationCallback(t,!0),this.eventOptimizationCallback(t,this.testLogic(e))},i.prototype.selectFrames=function(){var t,e,s,i;return s=$(window).height(),i=$(window).width(),e=i>s?i/s:s/i,t=4/3>=e?"4x3":1.5>=e?"3x2":"16x9",null!=this.ad.frame_set["landscape"+t]&&this.ad.assets.push(this.ad.frame_set["landscape"+t]),null!=this.ad.frame_set["portrait"+t]?this.ad.assets.push(this.ad.frame_set["portrait"+t]):void 0},i}(Tapjoy.AdUnit)}).call(this);